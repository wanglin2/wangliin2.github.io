<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>markjs 标注库 | 王林的个人博客</title>
    <meta name="generator" content="VuePress 1.5.2">
    
    <meta name="description" content="如题。">
    <link rel="preload" href="/vue_components/assets/css/0.styles.44e76d06.css" as="style"><link rel="preload" href="/vue_components/assets/js/app.2a8a8f25.js" as="script"><link rel="preload" href="/vue_components/assets/js/3.2c2d63e0.js" as="script"><link rel="preload" href="/vue_components/assets/js/9.b8fbaa3e.js" as="script"><link rel="preload" href="/vue_components/assets/js/33.2476d2ad.js" as="script"><link rel="prefetch" href="/vue_components/assets/js/10.98a59543.js"><link rel="prefetch" href="/vue_components/assets/js/11.a3f72a87.js"><link rel="prefetch" href="/vue_components/assets/js/12.beda9d7e.js"><link rel="prefetch" href="/vue_components/assets/js/13.b2d14e44.js"><link rel="prefetch" href="/vue_components/assets/js/14.c3d40cd0.js"><link rel="prefetch" href="/vue_components/assets/js/15.147456b6.js"><link rel="prefetch" href="/vue_components/assets/js/16.09e712e0.js"><link rel="prefetch" href="/vue_components/assets/js/17.c273d05b.js"><link rel="prefetch" href="/vue_components/assets/js/18.dfc13ad2.js"><link rel="prefetch" href="/vue_components/assets/js/19.e493a27d.js"><link rel="prefetch" href="/vue_components/assets/js/2.269dabf8.js"><link rel="prefetch" href="/vue_components/assets/js/20.01c1b058.js"><link rel="prefetch" href="/vue_components/assets/js/21.af94e53b.js"><link rel="prefetch" href="/vue_components/assets/js/22.3bf75fad.js"><link rel="prefetch" href="/vue_components/assets/js/23.a2bcb9ac.js"><link rel="prefetch" href="/vue_components/assets/js/24.0df4e39e.js"><link rel="prefetch" href="/vue_components/assets/js/25.69c54982.js"><link rel="prefetch" href="/vue_components/assets/js/26.9b4ba29f.js"><link rel="prefetch" href="/vue_components/assets/js/27.ee644eda.js"><link rel="prefetch" href="/vue_components/assets/js/28.caa4a1dc.js"><link rel="prefetch" href="/vue_components/assets/js/29.52c76767.js"><link rel="prefetch" href="/vue_components/assets/js/30.de768e43.js"><link rel="prefetch" href="/vue_components/assets/js/31.7915573b.js"><link rel="prefetch" href="/vue_components/assets/js/32.9c27ade0.js"><link rel="prefetch" href="/vue_components/assets/js/34.2335453a.js"><link rel="prefetch" href="/vue_components/assets/js/35.9ad374ff.js"><link rel="prefetch" href="/vue_components/assets/js/36.4ee74c83.js"><link rel="prefetch" href="/vue_components/assets/js/37.b32ab3f2.js"><link rel="prefetch" href="/vue_components/assets/js/38.661cdba2.js"><link rel="prefetch" href="/vue_components/assets/js/39.71b3f624.js"><link rel="prefetch" href="/vue_components/assets/js/4.f800e40a.js"><link rel="prefetch" href="/vue_components/assets/js/40.c6ccc062.js"><link rel="prefetch" href="/vue_components/assets/js/41.f15ab095.js"><link rel="prefetch" href="/vue_components/assets/js/42.1c034c68.js"><link rel="prefetch" href="/vue_components/assets/js/43.a02b503a.js"><link rel="prefetch" href="/vue_components/assets/js/44.eefc404f.js"><link rel="prefetch" href="/vue_components/assets/js/45.be81dec7.js"><link rel="prefetch" href="/vue_components/assets/js/46.40d79946.js"><link rel="prefetch" href="/vue_components/assets/js/47.94a4753a.js"><link rel="prefetch" href="/vue_components/assets/js/48.b42985d7.js"><link rel="prefetch" href="/vue_components/assets/js/49.2c2ade50.js"><link rel="prefetch" href="/vue_components/assets/js/5.cd6a39c1.js"><link rel="prefetch" href="/vue_components/assets/js/50.12afd37f.js"><link rel="prefetch" href="/vue_components/assets/js/51.c62b92d1.js"><link rel="prefetch" href="/vue_components/assets/js/52.40ef81eb.js"><link rel="prefetch" href="/vue_components/assets/js/53.aef88493.js"><link rel="prefetch" href="/vue_components/assets/js/54.b41dbe03.js"><link rel="prefetch" href="/vue_components/assets/js/55.d4fdf48f.js"><link rel="prefetch" href="/vue_components/assets/js/56.3968eef5.js"><link rel="prefetch" href="/vue_components/assets/js/57.883fcc59.js"><link rel="prefetch" href="/vue_components/assets/js/6.b5ffe322.js"><link rel="prefetch" href="/vue_components/assets/js/7.d38dc03c.js"><link rel="prefetch" href="/vue_components/assets/js/8.c70e3692.js">
    <link rel="stylesheet" href="/vue_components/assets/css/0.styles.44e76d06.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/vue_components/" class="home-link router-link-active"><!----><span class="site-name">王林的个人博客</span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><!----></div></header><div class="sidebar-mask"></div><aside class="sidebar"><!----><ul class="sidebar-links"><li><a href="/vue_components/" aria-current="page" class="sidebar-link">首页</a></li><li><a href="/vue_components/zh/about/" class="sidebar-link">关于</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>分享</span><!----></p><ul class="sidebar-links sidebar-group-items"><li><a href="/vue_components/zh/share/12.html" class="sidebar-link">【汉诺塔】小游戏开发教程</a></li><li><a href="/vue_components/zh/share/11.html" class="sidebar-link">OpenLayers入门（二）</a></li><li><a href="/vue_components/zh/share/1.html" class="sidebar-link">如何实现一个排序算法演示动画</a></li><li><a href="/vue_components/zh/share/2.html" class="sidebar-link">如何实现一个vue组件库的在线主题编辑器</a></li><li><a href="/vue_components/zh/share/3.html" class="sidebar-link">OpenLayers入门（一）</a></li><li><a href="/vue_components/zh/share/4.html" class="sidebar-link">手摸手带你实现一个时间轴组件</a></li><li><a href="/vue_components/zh/share/5.html" class="sidebar-link">lerna入门</a></li><li><a href="/vue_components/zh/share/6.html" class="sidebar-link">Preset预设</a></li><li><a href="/vue_components/zh/share/7.html" class="sidebar-link">2的0次方为什么等于1？</a></li><li><a href="/vue_components/zh/share/8.html" class="sidebar-link">汉诺塔游戏与递归</a></li><li><a href="/vue_components/zh/share/9.html" class="sidebar-link">又一篇介绍vue3.0组合式api的文章</a></li><li><a href="/vue_components/zh/share/10.html" class="sidebar-link">浅析浏览器书签的导入和导出</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>开发指南</span><!----></p><ul class="sidebar-links sidebar-group-items"><li><a href="/vue_components/zh/guide/start.html" class="sidebar-link">简介</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>PC端组件</span><!----></p><ul class="sidebar-links sidebar-group-items"><li><a href="/vue_components/zh/web/sCharts/" class="sidebar-link">sCharts 图表组件</a></li><li><a href="/vue_components/zh/web/inRange/" class="sidebar-link">InRange 分数展示组件</a></li><li><a href="/vue_components/zh/web/asyncTreeInput/" class="sidebar-link">AsyncTreeInput 异步树输入框组件</a></li><li><a href="/vue_components/zh/web/markerImg/" class="sidebar-link">MarkerImg 带标注的图片显示组件</a></li><li><a href="/vue_components/zh/web/markImgView/" class="sidebar-link">MarkImgView 图片预览组件</a></li><li><a href="/vue_components/zh/web/mediaViewList/" class="sidebar-link">MediaViewList 媒体预览组件</a></li><li><a href="/vue_components/zh/web/processStepList/" class="sidebar-link">ProcessStepList 步骤列表组件</a></li><li><a href="/vue_components/zh/web/simpleDetail/" class="sidebar-link">SimpleDetail 简易详情组件</a></li><li><a href="/vue_components/zh/web/virtualList/" class="sidebar-link">VirtualList 虚拟列表组件</a></li><li><a href="/vue_components/zh/web/importDialog/" class="sidebar-link">ImportDialog 文件导入弹窗组件</a></li><li><a href="/vue_components/zh/web/imgUpload/" class="sidebar-link">ImgUpload 图片选择上传组件</a></li><li><a href="/vue_components/zh/web/tagCard/" class="sidebar-link">TagCard 标签选择卡片组件</a></li><li><a href="/vue_components/zh/web/mInfoList/" class="sidebar-link">MInfoList 简易信息翻页展示组件</a></li><li><a href="/vue_components/zh/web/marquee/" class="sidebar-link">Marquee 跑马灯组件</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>PC端mixin</span><!----></p><ul class="sidebar-links sidebar-group-items"><li><a href="/vue_components/zh/webMixin/thDropdownMixin/" class="sidebar-link">thDropdownMixin 表头下拉菜单混入</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>APP端组件</span><!----></p><ul class="sidebar-links sidebar-group-items"><li><a href="/vue_components/zh/app/markerImgMobile/" class="sidebar-link">MarkerImgMobile 带标注的图片预览组件</a></li><li><a href="/vue_components/zh/app/mediasMobile/" class="sidebar-link">MediasMobile 媒体组件选择预览组件</a></li><li><a href="/vue_components/zh/app/switchBtn/" class="sidebar-link">SwitchBtn 按钮组</a></li><li><a href="/vue_components/zh/app/quickInput/" class="sidebar-link">QuickInput 快速输入框</a></li><li><a href="/vue_components/zh/app/iTouch/" class="sidebar-link">ITouch 触摸拖动库</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>APP端mixin</span><!----></p><ul class="sidebar-links sidebar-group-items"><li><a href="/vue_components/zh/appMixin/stRecovery/" class="sidebar-link">stRecovery 滚动位置恢复</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>库</span><!----></p><ul class="sidebar-links sidebar-group-items"><li><a href="/vue_components/zh/library/observer/" class="sidebar-link">Observer 发布订阅库</a></li><li><a href="/vue_components/zh/library/measure/" class="sidebar-link">OpenLayers 测距离面积</a></li><li><a href="/vue_components/zh/library/markjs/" aria-current="page" class="active sidebar-link">markjs 标注库</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vue_components/zh/library/markjs/#安装" class="sidebar-link">安装</a></li><li class="sidebar-sub-header"><a href="/vue_components/zh/library/markjs/#引入" class="sidebar-link">引入</a></li><li class="sidebar-sub-header"><a href="/vue_components/zh/library/markjs/#基础用法" class="sidebar-link">基础用法</a></li><li class="sidebar-sub-header"><a href="/vue_components/zh/library/markjs/#标注图片" class="sidebar-link">标注图片</a></li><li class="sidebar-sub-header"><a href="/vue_components/zh/library/markjs/#特定形状" class="sidebar-link">特定形状</a></li><li class="sidebar-sub-header"><a href="/vue_components/zh/library/markjs/#单独编辑" class="sidebar-link">单独编辑</a></li><li class="sidebar-sub-header"><a href="/vue_components/zh/library/markjs/#综合示例" class="sidebar-link">综合示例</a></li><li class="sidebar-sub-header"><a href="/vue_components/zh/library/markjs/#api" class="sidebar-link">API</a></li></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>代码片段</span><!----></p><ul class="sidebar-links sidebar-group-items"><li><a href="/vue_components/zh/fragment/openlayers/" class="sidebar-link">OpenLayers 相关</a></li><li><a href="/vue_components/zh/fragment/data/" class="sidebar-link">数据相关</a></li><li><a href="/vue_components/zh/fragment/date/" class="sidebar-link">时间日期相关</a></li><li><a href="/vue_components/zh/fragment/utils/" class="sidebar-link">工具函数</a></li><li><a href="/vue_components/zh/fragment/latLon/" class="sidebar-link">坐标系转换</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>具体业务组件</span><!----></p><ul class="sidebar-links sidebar-group-items"><li><a href="/vue_components/zh/business/cm/multiStreet/" class="sidebar-link">【CM】MultiStreet 多街道</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>其他</span><!----></p><ul class="sidebar-links sidebar-group-items"><li><a href="/vue_components/zh/others/sites/" class="sidebar-link">网址导航</a></li></ul></section></li></ul></aside><main class="page"><div class="theme-default-content content__default" data-v-01712308 data-v-01712308><h1 id="markjs-标注库" data-v-01712308><a href="#markjs-标注库" class="header-anchor" data-v-01712308>#</a> markjs 标注库</h1><p data-v-01712308>一个简单的用来标注区域的库。</p><p data-v-01712308><code data-v-01712308>markjs</code>使用插件化的开发方式，包括核心的标注功能也是一个插件，默认自动注册。</p><p data-v-01712308>其他内置插件包括：img（图片支持插件）、mouse（鼠标样式支持插件）、shape（特定形状支持插件）。此外，你也可以开发自己的插件，后面会详细介绍。</p><h2 id="安装" data-v-01712308><a href="#安装" class="header-anchor" data-v-01712308>#</a> 安装</h2><div class="language-bash extra-class" data-v-01712308><pre class="language-bash" data-v-01712308><code data-v-01712308>$ <span class="token function" data-v-01712308>npm</span> i markjs
</code></pre></div><h2 id="引入" data-v-01712308><a href="#引入" class="header-anchor" data-v-01712308>#</a> 引入</h2><div class="language-bash extra-class" data-v-01712308><pre class="language-bash" data-v-01712308><code data-v-01712308><span class="token function" data-v-01712308>import</span> markjs from <span class="token string" data-v-01712308>'markjs'</span>
</code></pre></div><h2 id="基础用法" data-v-01712308><a href="#基础用法" class="header-anchor" data-v-01712308>#</a> 基础用法</h2><p data-v-01712308>1.引入<code data-v-01712308>markjs</code>，再按需引入你需要的插件，因为文档框架限制，所以所有示例都一次性引入所有内置插件。</p><p data-v-01712308>2.创建一个容器元素，容器元素需要有固定的宽高。</p><p data-v-01712308>3.创建一个实例，传入特定的配置项，之后再调用特定的功能方法即可。</p><p data-v-01712308>同时这个示例也演示了鼠标样式插件的功能，就是在特定的情况下显示特定的鼠标指针及提示信息，如果你不需要可以不引入，需要定制也可以自己开发对应的插件。</p><section class="code-box demo-" data-v-01712308><!----><section class="code-box-demo"><div class="container" data-v-01712308><div class="markBox" data-v-01712308></div><button type="button" title="" class="el-button el-button--primary" data-v-01712308><!----><!----><!----><span>新增标注</span></button><button disabled="disabled" type="button" title="" class="el-button el-button--primary is-disabled" data-v-01712308><!----><!----><!----><span>退出新增</span></button><button type="button" title="" class="el-button el-button--primary" data-v-01712308><!----><!----><!----><span>获取标注（控制台查看）</span></button><button disabled="disabled" type="button" title="" class="el-button el-button--primary is-disabled is-icon" data-v-01712308><!----><i class="h-icon-delete"></i><!----><!----></button><button type="button" title="" class="el-button el-button--primary is-icon is-icon-text" data-v-01712308><!----><i class="h-icon-delete"></i><!----><span>删除全部</span></button></div></section><section class="code-box-meta"><div class="code-box-title">基础用法</div><div class="code-box-desc"></div><span class="el-tooltip code-expand-icon"><i class="h-icon-angles_down_sm"></i></span></section><section class="code-box-highlight" style="display:none;"><div class="code-box-actions"></div></section></section><div class="language-vue extra-class" data-v-01712308><pre class="language-vue" data-v-01712308><code data-v-01712308><span class="token tag" data-v-01712308><span class="token tag" data-v-01712308><span class="token punctuation" data-v-01712308>&lt;</span>template</span><span class="token punctuation" data-v-01712308>&gt;</span></span>
  <span class="token tag" data-v-01712308><span class="token tag" data-v-01712308><span class="token punctuation" data-v-01712308>&lt;</span>div</span> <span class="token attr-name" data-v-01712308>class</span><span class="token attr-value" data-v-01712308><span class="token punctuation" data-v-01712308>=</span><span class="token punctuation" data-v-01712308>&quot;</span>container<span class="token punctuation" data-v-01712308>&quot;</span></span><span class="token punctuation" data-v-01712308>&gt;</span></span>
    <span class="token tag" data-v-01712308><span class="token tag" data-v-01712308><span class="token punctuation" data-v-01712308>&lt;</span>div</span> <span class="token attr-name" data-v-01712308>class</span><span class="token attr-value" data-v-01712308><span class="token punctuation" data-v-01712308>=</span><span class="token punctuation" data-v-01712308>&quot;</span>markBox<span class="token punctuation" data-v-01712308>&quot;</span></span> <span class="token attr-name" data-v-01712308>ref</span><span class="token attr-value" data-v-01712308><span class="token punctuation" data-v-01712308>=</span><span class="token punctuation" data-v-01712308>&quot;</span>markBox1<span class="token punctuation" data-v-01712308>&quot;</span></span><span class="token punctuation" data-v-01712308>&gt;</span></span><span class="token tag" data-v-01712308><span class="token tag" data-v-01712308><span class="token punctuation" data-v-01712308>&lt;/</span>div</span><span class="token punctuation" data-v-01712308>&gt;</span></span>
    <span class="token tag" data-v-01712308><span class="token tag" data-v-01712308><span class="token punctuation" data-v-01712308>&lt;</span>el-button</span> <span class="token attr-name" data-v-01712308>type</span><span class="token attr-value" data-v-01712308><span class="token punctuation" data-v-01712308>=</span><span class="token punctuation" data-v-01712308>&quot;</span>primary<span class="token punctuation" data-v-01712308>&quot;</span></span> <span class="token attr-name" data-v-01712308>@click</span><span class="token attr-value" data-v-01712308><span class="token punctuation" data-v-01712308>=</span><span class="token punctuation" data-v-01712308>&quot;</span>create1<span class="token punctuation" data-v-01712308>&quot;</span></span> <span class="token attr-name" data-v-01712308>:disabled</span><span class="token attr-value" data-v-01712308><span class="token punctuation" data-v-01712308>=</span><span class="token punctuation" data-v-01712308>&quot;</span>!editing1 || !!curEditMarkItem1<span class="token punctuation" data-v-01712308>&quot;</span></span><span class="token punctuation" data-v-01712308>&gt;</span></span>新增标注<span class="token tag" data-v-01712308><span class="token tag" data-v-01712308><span class="token punctuation" data-v-01712308>&lt;/</span>el-button</span><span class="token punctuation" data-v-01712308>&gt;</span></span>
    <span class="token tag" data-v-01712308><span class="token tag" data-v-01712308><span class="token punctuation" data-v-01712308>&lt;</span>el-button</span> <span class="token attr-name" data-v-01712308>type</span><span class="token attr-value" data-v-01712308><span class="token punctuation" data-v-01712308>=</span><span class="token punctuation" data-v-01712308>&quot;</span>primary<span class="token punctuation" data-v-01712308>&quot;</span></span> <span class="token attr-name" data-v-01712308>@click</span><span class="token attr-value" data-v-01712308><span class="token punctuation" data-v-01712308>=</span><span class="token punctuation" data-v-01712308>&quot;</span>exit1<span class="token punctuation" data-v-01712308>&quot;</span></span> <span class="token attr-name" data-v-01712308>:disabled</span><span class="token attr-value" data-v-01712308><span class="token punctuation" data-v-01712308>=</span><span class="token punctuation" data-v-01712308>&quot;</span>!isCreateMarking1<span class="token punctuation" data-v-01712308>&quot;</span></span><span class="token punctuation" data-v-01712308>&gt;</span></span>退出新增<span class="token tag" data-v-01712308><span class="token tag" data-v-01712308><span class="token punctuation" data-v-01712308>&lt;/</span>el-button</span><span class="token punctuation" data-v-01712308>&gt;</span></span>
    <span class="token tag" data-v-01712308><span class="token tag" data-v-01712308><span class="token punctuation" data-v-01712308>&lt;</span>el-button</span> <span class="token attr-name" data-v-01712308>type</span><span class="token attr-value" data-v-01712308><span class="token punctuation" data-v-01712308>=</span><span class="token punctuation" data-v-01712308>&quot;</span>primary<span class="token punctuation" data-v-01712308>&quot;</span></span> <span class="token attr-name" data-v-01712308>@click</span><span class="token attr-value" data-v-01712308><span class="token punctuation" data-v-01712308>=</span><span class="token punctuation" data-v-01712308>&quot;</span>getMarkData1<span class="token punctuation" data-v-01712308>&quot;</span></span><span class="token punctuation" data-v-01712308>&gt;</span></span>获取标注（控制台查看）<span class="token tag" data-v-01712308><span class="token tag" data-v-01712308><span class="token punctuation" data-v-01712308>&lt;/</span>el-button</span><span class="token punctuation" data-v-01712308>&gt;</span></span>
    <span class="token tag" data-v-01712308><span class="token tag" data-v-01712308><span class="token punctuation" data-v-01712308>&lt;</span>el-button</span> <span class="token attr-name" data-v-01712308>type</span><span class="token attr-value" data-v-01712308><span class="token punctuation" data-v-01712308>=</span><span class="token punctuation" data-v-01712308>&quot;</span>primary<span class="token punctuation" data-v-01712308>&quot;</span></span> <span class="token attr-name" data-v-01712308>icon</span><span class="token attr-value" data-v-01712308><span class="token punctuation" data-v-01712308>=</span><span class="token punctuation" data-v-01712308>&quot;</span>h-icon-delete<span class="token punctuation" data-v-01712308>&quot;</span></span> <span class="token attr-name" data-v-01712308>@click</span><span class="token attr-value" data-v-01712308><span class="token punctuation" data-v-01712308>=</span><span class="token punctuation" data-v-01712308>&quot;</span>deleteItem1<span class="token punctuation" data-v-01712308>&quot;</span></span> <span class="token attr-name" data-v-01712308>:disabled</span><span class="token attr-value" data-v-01712308><span class="token punctuation" data-v-01712308>=</span><span class="token punctuation" data-v-01712308>&quot;</span>!curEditMarkItem1<span class="token punctuation" data-v-01712308>&quot;</span></span><span class="token punctuation" data-v-01712308>&gt;</span></span><span class="token tag" data-v-01712308><span class="token tag" data-v-01712308><span class="token punctuation" data-v-01712308>&lt;/</span>el-button</span><span class="token punctuation" data-v-01712308>&gt;</span></span>
    <span class="token tag" data-v-01712308><span class="token tag" data-v-01712308><span class="token punctuation" data-v-01712308>&lt;</span>el-button</span> <span class="token attr-name" data-v-01712308>type</span><span class="token attr-value" data-v-01712308><span class="token punctuation" data-v-01712308>=</span><span class="token punctuation" data-v-01712308>&quot;</span>primary<span class="token punctuation" data-v-01712308>&quot;</span></span> <span class="token attr-name" data-v-01712308>icon</span><span class="token attr-value" data-v-01712308><span class="token punctuation" data-v-01712308>=</span><span class="token punctuation" data-v-01712308>&quot;</span>h-icon-delete<span class="token punctuation" data-v-01712308>&quot;</span></span> <span class="token attr-name" data-v-01712308>@click</span><span class="token attr-value" data-v-01712308><span class="token punctuation" data-v-01712308>=</span><span class="token punctuation" data-v-01712308>&quot;</span>deleteAll1<span class="token punctuation" data-v-01712308>&quot;</span></span><span class="token punctuation" data-v-01712308>&gt;</span></span>删除全部<span class="token tag" data-v-01712308><span class="token tag" data-v-01712308><span class="token punctuation" data-v-01712308>&lt;/</span>el-button</span><span class="token punctuation" data-v-01712308>&gt;</span></span>
  <span class="token tag" data-v-01712308><span class="token tag" data-v-01712308><span class="token punctuation" data-v-01712308>&lt;/</span>div</span><span class="token punctuation" data-v-01712308>&gt;</span></span>
<span class="token tag" data-v-01712308><span class="token tag" data-v-01712308><span class="token punctuation" data-v-01712308>&lt;/</span>template</span><span class="token punctuation" data-v-01712308>&gt;</span></span>

<span class="token tag" data-v-01712308><span class="token tag" data-v-01712308><span class="token punctuation" data-v-01712308>&lt;</span>script</span><span class="token punctuation" data-v-01712308>&gt;</span></span><span class="token script" data-v-01712308><span class="token language-javascript" data-v-01712308>
<span class="token keyword" data-v-01712308>import</span> Markjs <span class="token keyword" data-v-01712308>from</span> <span class="token string" data-v-01712308>'markjs'</span>
<span class="token keyword" data-v-01712308>import</span> mousePlugin <span class="token keyword" data-v-01712308>from</span> <span class="token string" data-v-01712308>'markjs/src/plugins/mouse'</span>
Markjs<span class="token punctuation" data-v-01712308>.</span><span class="token function" data-v-01712308>use</span><span class="token punctuation" data-v-01712308>(</span>mousePlugin<span class="token punctuation" data-v-01712308>)</span>

<span class="token keyword" data-v-01712308>let</span> mark1 <span class="token operator" data-v-01712308>=</span> <span class="token keyword" data-v-01712308>null</span>
<span class="token keyword" data-v-01712308>export</span> <span class="token keyword" data-v-01712308>default</span> <span class="token punctuation" data-v-01712308>{</span>
  <span class="token function" data-v-01712308>data</span> <span class="token punctuation" data-v-01712308>(</span><span class="token punctuation" data-v-01712308>)</span> <span class="token punctuation" data-v-01712308>{</span>
    <span class="token keyword" data-v-01712308>return</span> <span class="token punctuation" data-v-01712308>{</span>
      editing1<span class="token operator" data-v-01712308>:</span> <span class="token boolean" data-v-01712308>true</span><span class="token punctuation" data-v-01712308>,</span>
      curEditMarkItem1<span class="token operator" data-v-01712308>:</span> <span class="token keyword" data-v-01712308>null</span><span class="token punctuation" data-v-01712308>,</span>
      isCreateMarking1<span class="token operator" data-v-01712308>:</span> <span class="token boolean" data-v-01712308>false</span><span class="token punctuation" data-v-01712308>,</span>
    <span class="token punctuation" data-v-01712308>}</span>
  <span class="token punctuation" data-v-01712308>}</span><span class="token punctuation" data-v-01712308>,</span>
  <span class="token function" data-v-01712308>mounted</span> <span class="token punctuation" data-v-01712308>(</span><span class="token punctuation" data-v-01712308>)</span> <span class="token punctuation" data-v-01712308>{</span>
    mark1 <span class="token operator" data-v-01712308>=</span> <span class="token keyword" data-v-01712308>new</span> <span class="token class-name" data-v-01712308>Markjs</span><span class="token punctuation" data-v-01712308>(</span><span class="token punctuation" data-v-01712308>{</span>
      el<span class="token operator" data-v-01712308>:</span> <span class="token keyword" data-v-01712308>this</span><span class="token punctuation" data-v-01712308>.</span>$refs<span class="token punctuation" data-v-01712308>.</span>markBox1<span class="token punctuation" data-v-01712308>,</span>
      hoverActive<span class="token operator" data-v-01712308>:</span> <span class="token boolean" data-v-01712308>true</span>
    <span class="token punctuation" data-v-01712308>}</span><span class="token punctuation" data-v-01712308>)</span>
    mark1<span class="token punctuation" data-v-01712308>.</span><span class="token function" data-v-01712308>on</span><span class="token punctuation" data-v-01712308>(</span><span class="token string" data-v-01712308>'CURRENT-MARK-ITEM-CHANGE'</span><span class="token punctuation" data-v-01712308>,</span> <span class="token punctuation" data-v-01712308>(</span><span class="token parameter" data-v-01712308>item</span><span class="token punctuation" data-v-01712308>)</span> <span class="token operator" data-v-01712308>=&gt;</span> <span class="token punctuation" data-v-01712308>{</span>
      <span class="token keyword" data-v-01712308>this</span><span class="token punctuation" data-v-01712308>.</span>curEditMarkItem1 <span class="token operator" data-v-01712308>=</span> item
    <span class="token punctuation" data-v-01712308>}</span><span class="token punctuation" data-v-01712308>)</span>
    mark1<span class="token punctuation" data-v-01712308>.</span><span class="token function" data-v-01712308>on</span><span class="token punctuation" data-v-01712308>(</span><span class="token string" data-v-01712308>'IS-CREATE-MARKING-CHANGE'</span><span class="token punctuation" data-v-01712308>,</span> <span class="token punctuation" data-v-01712308>(</span><span class="token parameter" data-v-01712308>state</span><span class="token punctuation" data-v-01712308>)</span> <span class="token operator" data-v-01712308>=&gt;</span><span class="token punctuation" data-v-01712308>{</span>
      <span class="token keyword" data-v-01712308>this</span><span class="token punctuation" data-v-01712308>.</span>isCreateMarking1 <span class="token operator" data-v-01712308>=</span> state
    <span class="token punctuation" data-v-01712308>}</span><span class="token punctuation" data-v-01712308>)</span>
    mark1<span class="token punctuation" data-v-01712308>.</span><span class="token function" data-v-01712308>on</span><span class="token punctuation" data-v-01712308>(</span><span class="token string" data-v-01712308>'NOT-ENOUGH-END-POINTS'</span><span class="token punctuation" data-v-01712308>,</span> <span class="token punctuation" data-v-01712308>(</span><span class="token parameter" data-v-01712308>item</span><span class="token punctuation" data-v-01712308>)</span> <span class="token operator" data-v-01712308>=&gt;</span><span class="token punctuation" data-v-01712308>{</span>
      <span class="token keyword" data-v-01712308>this</span><span class="token punctuation" data-v-01712308>.</span>$message<span class="token punctuation" data-v-01712308>.</span><span class="token function" data-v-01712308>warning</span><span class="token punctuation" data-v-01712308>(</span><span class="token string" data-v-01712308>'至少需要绘制三个端点'</span><span class="token punctuation" data-v-01712308>)</span>
    <span class="token punctuation" data-v-01712308>}</span><span class="token punctuation" data-v-01712308>)</span>
  <span class="token punctuation" data-v-01712308>}</span><span class="token punctuation" data-v-01712308>,</span>
  methods<span class="token operator" data-v-01712308>:</span> <span class="token punctuation" data-v-01712308>{</span>
    <span class="token function" data-v-01712308>getMarkData1</span><span class="token punctuation" data-v-01712308>(</span><span class="token punctuation" data-v-01712308>)</span> <span class="token punctuation" data-v-01712308>{</span>
      console<span class="token punctuation" data-v-01712308>.</span><span class="token function" data-v-01712308>log</span><span class="token punctuation" data-v-01712308>(</span>mark1<span class="token punctuation" data-v-01712308>.</span><span class="token function" data-v-01712308>getMarkData</span><span class="token punctuation" data-v-01712308>(</span><span class="token punctuation" data-v-01712308>)</span><span class="token punctuation" data-v-01712308>,</span> <span class="token constant" data-v-01712308>JSON</span><span class="token punctuation" data-v-01712308>.</span><span class="token function" data-v-01712308>stringify</span><span class="token punctuation" data-v-01712308>(</span>mark1<span class="token punctuation" data-v-01712308>.</span><span class="token function" data-v-01712308>getMarkData</span><span class="token punctuation" data-v-01712308>(</span><span class="token punctuation" data-v-01712308>)</span><span class="token punctuation" data-v-01712308>)</span><span class="token punctuation" data-v-01712308>)</span>
    <span class="token punctuation" data-v-01712308>}</span><span class="token punctuation" data-v-01712308>,</span>
    <span class="token function" data-v-01712308>deleteItem1</span><span class="token punctuation" data-v-01712308>(</span><span class="token punctuation" data-v-01712308>)</span> <span class="token punctuation" data-v-01712308>{</span>
      mark1<span class="token punctuation" data-v-01712308>.</span><span class="token function" data-v-01712308>deleteMarkItem</span><span class="token punctuation" data-v-01712308>(</span><span class="token keyword" data-v-01712308>this</span><span class="token punctuation" data-v-01712308>.</span>curEditMarkItem1<span class="token punctuation" data-v-01712308>)</span>
    <span class="token punctuation" data-v-01712308>}</span><span class="token punctuation" data-v-01712308>,</span>
    <span class="token function" data-v-01712308>deleteAll1</span><span class="token punctuation" data-v-01712308>(</span><span class="token punctuation" data-v-01712308>)</span> <span class="token punctuation" data-v-01712308>{</span>
      mark1<span class="token punctuation" data-v-01712308>.</span><span class="token function" data-v-01712308>deleteAllMarkItem</span><span class="token punctuation" data-v-01712308>(</span><span class="token punctuation" data-v-01712308>)</span>
    <span class="token punctuation" data-v-01712308>}</span><span class="token punctuation" data-v-01712308>,</span>
    <span class="token function" data-v-01712308>create1</span><span class="token punctuation" data-v-01712308>(</span><span class="token punctuation" data-v-01712308>)</span> <span class="token punctuation" data-v-01712308>{</span>
      mark1<span class="token punctuation" data-v-01712308>.</span><span class="token function" data-v-01712308>createMarkItem</span><span class="token punctuation" data-v-01712308>(</span><span class="token punctuation" data-v-01712308>)</span>
    <span class="token punctuation" data-v-01712308>}</span><span class="token punctuation" data-v-01712308>,</span>
    <span class="token function" data-v-01712308>exit1</span><span class="token punctuation" data-v-01712308>(</span><span class="token punctuation" data-v-01712308>)</span> <span class="token punctuation" data-v-01712308>{</span>
      mark1<span class="token punctuation" data-v-01712308>.</span><span class="token function" data-v-01712308>exitCreate</span><span class="token punctuation" data-v-01712308>(</span><span class="token punctuation" data-v-01712308>)</span>
    <span class="token punctuation" data-v-01712308>}</span>
  <span class="token punctuation" data-v-01712308>}</span>
<span class="token punctuation" data-v-01712308>}</span>
</span></span><span class="token tag" data-v-01712308><span class="token tag" data-v-01712308><span class="token punctuation" data-v-01712308>&lt;/</span>script</span><span class="token punctuation" data-v-01712308>&gt;</span></span>

<span class="token tag" data-v-01712308><span class="token tag" data-v-01712308><span class="token punctuation" data-v-01712308>&lt;</span>style</span> <span class="token attr-name" data-v-01712308>lang</span><span class="token attr-value" data-v-01712308><span class="token punctuation" data-v-01712308>=</span><span class="token punctuation" data-v-01712308>&quot;</span>less<span class="token punctuation" data-v-01712308>&quot;</span></span> <span class="token attr-name" data-v-01712308>scoped</span><span class="token punctuation" data-v-01712308>&gt;</span></span><span class="token style" data-v-01712308><span class="token language-css" data-v-01712308>
<span class="token selector" data-v-01712308>.container</span> <span class="token punctuation" data-v-01712308>{</span>  
  <span class="token selector" data-v-01712308>.markBox</span> <span class="token punctuation" data-v-01712308>{</span>
    <span class="token property" data-v-01712308>width</span><span class="token punctuation" data-v-01712308>:</span> 600px<span class="token punctuation" data-v-01712308>;</span>
    <span class="token property" data-v-01712308>height</span><span class="token punctuation" data-v-01712308>:</span> 400px<span class="token punctuation" data-v-01712308>;</span>
    <span class="token property" data-v-01712308>background-color</span><span class="token punctuation" data-v-01712308>:</span> #f5f5f5<span class="token punctuation" data-v-01712308>;</span>
    <span class="token property" data-v-01712308>margin-bottom</span><span class="token punctuation" data-v-01712308>:</span> 10px<span class="token punctuation" data-v-01712308>;</span>
  <span class="token punctuation" data-v-01712308>}</span>
<span class="token punctuation" data-v-01712308>}</span>
</span></span><span class="token tag" data-v-01712308><span class="token tag" data-v-01712308><span class="token punctuation" data-v-01712308>&lt;/</span>style</span><span class="token punctuation" data-v-01712308>&gt;</span></span>
</code></pre></div><h2 id="标注图片" data-v-01712308><a href="#标注图片" class="header-anchor" data-v-01712308>#</a> 标注图片</h2><p data-v-01712308>标注图片是一个很常用的功能，所以内置了一个插件来支持，插件可以加载图片并根据图片原始尺寸来进行缩放。</p><p data-v-01712308>如果实际绘制区域和容器大小不一致，默认会居中进行显示。</p><p data-v-01712308>同时本示例演示了线段的交叉检测及最多能绘制的区域限制功能。</p><section class="code-box demo-" data-v-01712308><!----><section class="code-box-demo"><div class="container" data-v-01712308><div class="markBox" data-v-01712308></div><button type="button" title="" class="el-button el-button--primary" data-v-01712308><!----><!----><!----><span>新增标注</span></button><button disabled="disabled" type="button" title="" class="el-button el-button--primary is-disabled" data-v-01712308><!----><!----><!----><span>退出新增</span></button><button type="button" title="" class="el-button el-button--primary" data-v-01712308><!----><!----><!----><span>获取标注（控制台查看）</span></button><button disabled="disabled" type="button" title="" class="el-button el-button--primary is-disabled is-icon" data-v-01712308><!----><i class="h-icon-delete"></i><!----><!----></button><button type="button" title="" class="el-button el-button--primary is-icon is-icon-text" data-v-01712308><!----><i class="h-icon-delete"></i><!----><span>删除全部</span></button></div></section><section class="code-box-meta"><div class="code-box-title">标注图片</div><div class="code-box-desc"></div><span class="el-tooltip code-expand-icon"><i class="h-icon-angles_down_sm"></i></span></section><section class="code-box-highlight" style="display:none;"><div class="code-box-actions"></div></section></section><div class="language-vue extra-class" data-v-01712308><pre class="language-vue" data-v-01712308><code data-v-01712308><span class="token tag" data-v-01712308><span class="token tag" data-v-01712308><span class="token punctuation" data-v-01712308>&lt;</span>template</span><span class="token punctuation" data-v-01712308>&gt;</span></span>
  <span class="token tag" data-v-01712308><span class="token tag" data-v-01712308><span class="token punctuation" data-v-01712308>&lt;</span>div</span> <span class="token attr-name" data-v-01712308>class</span><span class="token attr-value" data-v-01712308><span class="token punctuation" data-v-01712308>=</span><span class="token punctuation" data-v-01712308>&quot;</span>container<span class="token punctuation" data-v-01712308>&quot;</span></span><span class="token punctuation" data-v-01712308>&gt;</span></span>
    <span class="token tag" data-v-01712308><span class="token tag" data-v-01712308><span class="token punctuation" data-v-01712308>&lt;</span>div</span> <span class="token attr-name" data-v-01712308>class</span><span class="token attr-value" data-v-01712308><span class="token punctuation" data-v-01712308>=</span><span class="token punctuation" data-v-01712308>&quot;</span>markBox<span class="token punctuation" data-v-01712308>&quot;</span></span> <span class="token attr-name" data-v-01712308>ref</span><span class="token attr-value" data-v-01712308><span class="token punctuation" data-v-01712308>=</span><span class="token punctuation" data-v-01712308>&quot;</span>markBox2<span class="token punctuation" data-v-01712308>&quot;</span></span><span class="token punctuation" data-v-01712308>&gt;</span></span><span class="token tag" data-v-01712308><span class="token tag" data-v-01712308><span class="token punctuation" data-v-01712308>&lt;/</span>div</span><span class="token punctuation" data-v-01712308>&gt;</span></span>
    <span class="token tag" data-v-01712308><span class="token tag" data-v-01712308><span class="token punctuation" data-v-01712308>&lt;</span>el-button</span> <span class="token attr-name" data-v-01712308>type</span><span class="token attr-value" data-v-01712308><span class="token punctuation" data-v-01712308>=</span><span class="token punctuation" data-v-01712308>&quot;</span>primary<span class="token punctuation" data-v-01712308>&quot;</span></span> <span class="token attr-name" data-v-01712308>@click</span><span class="token attr-value" data-v-01712308><span class="token punctuation" data-v-01712308>=</span><span class="token punctuation" data-v-01712308>&quot;</span>create2<span class="token punctuation" data-v-01712308>&quot;</span></span> <span class="token attr-name" data-v-01712308>:disabled</span><span class="token attr-value" data-v-01712308><span class="token punctuation" data-v-01712308>=</span><span class="token punctuation" data-v-01712308>&quot;</span>!editing2 || !!curEditMarkItem2<span class="token punctuation" data-v-01712308>&quot;</span></span><span class="token punctuation" data-v-01712308>&gt;</span></span>新增标注<span class="token tag" data-v-01712308><span class="token tag" data-v-01712308><span class="token punctuation" data-v-01712308>&lt;/</span>el-button</span><span class="token punctuation" data-v-01712308>&gt;</span></span>
    <span class="token tag" data-v-01712308><span class="token tag" data-v-01712308><span class="token punctuation" data-v-01712308>&lt;</span>el-button</span> <span class="token attr-name" data-v-01712308>type</span><span class="token attr-value" data-v-01712308><span class="token punctuation" data-v-01712308>=</span><span class="token punctuation" data-v-01712308>&quot;</span>primary<span class="token punctuation" data-v-01712308>&quot;</span></span> <span class="token attr-name" data-v-01712308>@click</span><span class="token attr-value" data-v-01712308><span class="token punctuation" data-v-01712308>=</span><span class="token punctuation" data-v-01712308>&quot;</span>exit2<span class="token punctuation" data-v-01712308>&quot;</span></span> <span class="token attr-name" data-v-01712308>:disabled</span><span class="token attr-value" data-v-01712308><span class="token punctuation" data-v-01712308>=</span><span class="token punctuation" data-v-01712308>&quot;</span>!isCreateMarking2<span class="token punctuation" data-v-01712308>&quot;</span></span><span class="token punctuation" data-v-01712308>&gt;</span></span>退出新增<span class="token tag" data-v-01712308><span class="token tag" data-v-01712308><span class="token punctuation" data-v-01712308>&lt;/</span>el-button</span><span class="token punctuation" data-v-01712308>&gt;</span></span>
    <span class="token tag" data-v-01712308><span class="token tag" data-v-01712308><span class="token punctuation" data-v-01712308>&lt;</span>el-button</span> <span class="token attr-name" data-v-01712308>type</span><span class="token attr-value" data-v-01712308><span class="token punctuation" data-v-01712308>=</span><span class="token punctuation" data-v-01712308>&quot;</span>primary<span class="token punctuation" data-v-01712308>&quot;</span></span> <span class="token attr-name" data-v-01712308>@click</span><span class="token attr-value" data-v-01712308><span class="token punctuation" data-v-01712308>=</span><span class="token punctuation" data-v-01712308>&quot;</span>getMarkData2<span class="token punctuation" data-v-01712308>&quot;</span></span><span class="token punctuation" data-v-01712308>&gt;</span></span>获取标注（控制台查看）<span class="token tag" data-v-01712308><span class="token tag" data-v-01712308><span class="token punctuation" data-v-01712308>&lt;/</span>el-button</span><span class="token punctuation" data-v-01712308>&gt;</span></span>
    <span class="token tag" data-v-01712308><span class="token tag" data-v-01712308><span class="token punctuation" data-v-01712308>&lt;</span>el-button</span> <span class="token attr-name" data-v-01712308>type</span><span class="token attr-value" data-v-01712308><span class="token punctuation" data-v-01712308>=</span><span class="token punctuation" data-v-01712308>&quot;</span>primary<span class="token punctuation" data-v-01712308>&quot;</span></span> <span class="token attr-name" data-v-01712308>icon</span><span class="token attr-value" data-v-01712308><span class="token punctuation" data-v-01712308>=</span><span class="token punctuation" data-v-01712308>&quot;</span>h-icon-delete<span class="token punctuation" data-v-01712308>&quot;</span></span> <span class="token attr-name" data-v-01712308>@click</span><span class="token attr-value" data-v-01712308><span class="token punctuation" data-v-01712308>=</span><span class="token punctuation" data-v-01712308>&quot;</span>deleteItem2<span class="token punctuation" data-v-01712308>&quot;</span></span> <span class="token attr-name" data-v-01712308>:disabled</span><span class="token attr-value" data-v-01712308><span class="token punctuation" data-v-01712308>=</span><span class="token punctuation" data-v-01712308>&quot;</span>!curEditMarkItem2<span class="token punctuation" data-v-01712308>&quot;</span></span><span class="token punctuation" data-v-01712308>&gt;</span></span><span class="token tag" data-v-01712308><span class="token tag" data-v-01712308><span class="token punctuation" data-v-01712308>&lt;/</span>el-button</span><span class="token punctuation" data-v-01712308>&gt;</span></span>
    <span class="token tag" data-v-01712308><span class="token tag" data-v-01712308><span class="token punctuation" data-v-01712308>&lt;</span>el-button</span> <span class="token attr-name" data-v-01712308>type</span><span class="token attr-value" data-v-01712308><span class="token punctuation" data-v-01712308>=</span><span class="token punctuation" data-v-01712308>&quot;</span>primary<span class="token punctuation" data-v-01712308>&quot;</span></span> <span class="token attr-name" data-v-01712308>icon</span><span class="token attr-value" data-v-01712308><span class="token punctuation" data-v-01712308>=</span><span class="token punctuation" data-v-01712308>&quot;</span>h-icon-delete<span class="token punctuation" data-v-01712308>&quot;</span></span> <span class="token attr-name" data-v-01712308>@click</span><span class="token attr-value" data-v-01712308><span class="token punctuation" data-v-01712308>=</span><span class="token punctuation" data-v-01712308>&quot;</span>deleteAll2<span class="token punctuation" data-v-01712308>&quot;</span></span><span class="token punctuation" data-v-01712308>&gt;</span></span>删除全部<span class="token tag" data-v-01712308><span class="token tag" data-v-01712308><span class="token punctuation" data-v-01712308>&lt;/</span>el-button</span><span class="token punctuation" data-v-01712308>&gt;</span></span>
  <span class="token tag" data-v-01712308><span class="token tag" data-v-01712308><span class="token punctuation" data-v-01712308>&lt;/</span>div</span><span class="token punctuation" data-v-01712308>&gt;</span></span>
<span class="token tag" data-v-01712308><span class="token tag" data-v-01712308><span class="token punctuation" data-v-01712308>&lt;/</span>template</span><span class="token punctuation" data-v-01712308>&gt;</span></span>

<span class="token tag" data-v-01712308><span class="token tag" data-v-01712308><span class="token punctuation" data-v-01712308>&lt;</span>script</span><span class="token punctuation" data-v-01712308>&gt;</span></span><span class="token script" data-v-01712308><span class="token language-javascript" data-v-01712308>
<span class="token keyword" data-v-01712308>import</span> Markjs <span class="token keyword" data-v-01712308>from</span> <span class="token string" data-v-01712308>'markjs'</span>
<span class="token keyword" data-v-01712308>import</span> mousePlugin <span class="token keyword" data-v-01712308>from</span> <span class="token string" data-v-01712308>'markjs/src/plugins/mouse'</span>
<span class="token keyword" data-v-01712308>import</span> imgPlugin <span class="token keyword" data-v-01712308>from</span> <span class="token string" data-v-01712308>'markjs/src/plugins/img'</span>
<span class="token comment" data-v-01712308>// 引入图片插件，图片插件需要在编辑插件之前注册，因为编辑插件已经默认注册了，且在第一项，所以图片插件需要指定插到第一项</span>
Markjs<span class="token punctuation" data-v-01712308>.</span><span class="token function" data-v-01712308>use</span><span class="token punctuation" data-v-01712308>(</span>imgPlugin<span class="token punctuation" data-v-01712308>,</span> <span class="token number" data-v-01712308>0</span><span class="token punctuation" data-v-01712308>)</span>
Markjs<span class="token punctuation" data-v-01712308>.</span><span class="token function" data-v-01712308>use</span><span class="token punctuation" data-v-01712308>(</span>mousePlugin<span class="token punctuation" data-v-01712308>)</span>

<span class="token keyword" data-v-01712308>let</span> mark2 <span class="token operator" data-v-01712308>=</span> <span class="token keyword" data-v-01712308>null</span>
<span class="token keyword" data-v-01712308>export</span> <span class="token keyword" data-v-01712308>default</span> <span class="token punctuation" data-v-01712308>{</span>
  <span class="token function" data-v-01712308>data</span> <span class="token punctuation" data-v-01712308>(</span><span class="token punctuation" data-v-01712308>)</span> <span class="token punctuation" data-v-01712308>{</span>
    <span class="token keyword" data-v-01712308>return</span> <span class="token punctuation" data-v-01712308>{</span>
      editing2<span class="token operator" data-v-01712308>:</span> <span class="token boolean" data-v-01712308>true</span><span class="token punctuation" data-v-01712308>,</span>
      curEditMarkItem2<span class="token operator" data-v-01712308>:</span> <span class="token keyword" data-v-01712308>null</span><span class="token punctuation" data-v-01712308>,</span>
      isCreateMarking2<span class="token operator" data-v-01712308>:</span> <span class="token boolean" data-v-01712308>false</span>
    <span class="token punctuation" data-v-01712308>}</span>
  <span class="token punctuation" data-v-01712308>}</span><span class="token punctuation" data-v-01712308>,</span>
  <span class="token function" data-v-01712308>mounted</span> <span class="token punctuation" data-v-01712308>(</span><span class="token punctuation" data-v-01712308>)</span> <span class="token punctuation" data-v-01712308>{</span>
    mark2 <span class="token operator" data-v-01712308>=</span> <span class="token keyword" data-v-01712308>new</span> <span class="token class-name" data-v-01712308>Markjs</span><span class="token punctuation" data-v-01712308>(</span><span class="token punctuation" data-v-01712308>{</span>
      el<span class="token operator" data-v-01712308>:</span> <span class="token keyword" data-v-01712308>this</span><span class="token punctuation" data-v-01712308>.</span>$refs<span class="token punctuation" data-v-01712308>.</span>markBox2<span class="token punctuation" data-v-01712308>,</span>
      hoverActive<span class="token operator" data-v-01712308>:</span> <span class="token boolean" data-v-01712308>true</span><span class="token punctuation" data-v-01712308>,</span>
      img<span class="token operator" data-v-01712308>:</span> <span class="token function" data-v-01712308>require</span><span class="token punctuation" data-v-01712308>(</span><span class="token string" data-v-01712308>'../../../.vuepress/public/u7602.png'</span><span class="token punctuation" data-v-01712308>)</span><span class="token punctuation" data-v-01712308>,</span>
      elBg<span class="token operator" data-v-01712308>:</span> <span class="token string" data-v-01712308>'#000'</span><span class="token punctuation" data-v-01712308>,</span>
      max<span class="token operator" data-v-01712308>:</span> <span class="token number" data-v-01712308>3</span><span class="token punctuation" data-v-01712308>,</span>
      noCrossing<span class="token operator" data-v-01712308>:</span> <span class="token boolean" data-v-01712308>true</span>
    <span class="token punctuation" data-v-01712308>}</span><span class="token punctuation" data-v-01712308>)</span>
    mark2<span class="token punctuation" data-v-01712308>.</span><span class="token function" data-v-01712308>on</span><span class="token punctuation" data-v-01712308>(</span><span class="token string" data-v-01712308>'CURRENT-MARK-ITEM-CHANGE'</span><span class="token punctuation" data-v-01712308>,</span> <span class="token punctuation" data-v-01712308>(</span><span class="token parameter" data-v-01712308>item</span><span class="token punctuation" data-v-01712308>)</span> <span class="token operator" data-v-01712308>=&gt;</span> <span class="token punctuation" data-v-01712308>{</span>
      <span class="token keyword" data-v-01712308>this</span><span class="token punctuation" data-v-01712308>.</span>curEditMarkItem2 <span class="token operator" data-v-01712308>=</span> item
    <span class="token punctuation" data-v-01712308>}</span><span class="token punctuation" data-v-01712308>)</span>
    mark2<span class="token punctuation" data-v-01712308>.</span><span class="token function" data-v-01712308>on</span><span class="token punctuation" data-v-01712308>(</span><span class="token string" data-v-01712308>'IS-CREATE-MARKING-CHANGE'</span><span class="token punctuation" data-v-01712308>,</span> <span class="token punctuation" data-v-01712308>(</span><span class="token parameter" data-v-01712308>state</span><span class="token punctuation" data-v-01712308>)</span> <span class="token operator" data-v-01712308>=&gt;</span><span class="token punctuation" data-v-01712308>{</span>
      <span class="token keyword" data-v-01712308>this</span><span class="token punctuation" data-v-01712308>.</span>isCreateMarking2 <span class="token operator" data-v-01712308>=</span> state
    <span class="token punctuation" data-v-01712308>}</span><span class="token punctuation" data-v-01712308>)</span>
    mark2<span class="token punctuation" data-v-01712308>.</span><span class="token function" data-v-01712308>on</span><span class="token punctuation" data-v-01712308>(</span><span class="token string" data-v-01712308>'LINE-CROSS'</span><span class="token punctuation" data-v-01712308>,</span> <span class="token punctuation" data-v-01712308>(</span><span class="token parameter" data-v-01712308>item</span><span class="token punctuation" data-v-01712308>)</span> <span class="token operator" data-v-01712308>=&gt;</span> <span class="token punctuation" data-v-01712308>{</span>
      <span class="token keyword" data-v-01712308>this</span><span class="token punctuation" data-v-01712308>.</span>$message<span class="token punctuation" data-v-01712308>.</span><span class="token function" data-v-01712308>warning</span><span class="token punctuation" data-v-01712308>(</span><span class="token string" data-v-01712308>'线段不允许交叉'</span><span class="token punctuation" data-v-01712308>)</span>
    <span class="token punctuation" data-v-01712308>}</span><span class="token punctuation" data-v-01712308>)</span>
    mark2<span class="token punctuation" data-v-01712308>.</span><span class="token function" data-v-01712308>on</span><span class="token punctuation" data-v-01712308>(</span><span class="token string" data-v-01712308>'NOT-ENOUGH-END-POINTS'</span><span class="token punctuation" data-v-01712308>,</span> <span class="token punctuation" data-v-01712308>(</span><span class="token parameter" data-v-01712308>item</span><span class="token punctuation" data-v-01712308>)</span> <span class="token operator" data-v-01712308>=&gt;</span><span class="token punctuation" data-v-01712308>{</span>
      <span class="token keyword" data-v-01712308>this</span><span class="token punctuation" data-v-01712308>.</span>$message<span class="token punctuation" data-v-01712308>.</span><span class="token function" data-v-01712308>warning</span><span class="token punctuation" data-v-01712308>(</span><span class="token string" data-v-01712308>'至少需要绘制三个端点'</span><span class="token punctuation" data-v-01712308>)</span>
    <span class="token punctuation" data-v-01712308>}</span><span class="token punctuation" data-v-01712308>)</span>
    mark2<span class="token punctuation" data-v-01712308>.</span><span class="token function" data-v-01712308>on</span><span class="token punctuation" data-v-01712308>(</span><span class="token string" data-v-01712308>'COUNT-LIMIT'</span><span class="token punctuation" data-v-01712308>,</span> <span class="token punctuation" data-v-01712308>(</span><span class="token parameter" data-v-01712308>item</span><span class="token punctuation" data-v-01712308>)</span> <span class="token operator" data-v-01712308>=&gt;</span><span class="token punctuation" data-v-01712308>{</span>
      <span class="token keyword" data-v-01712308>this</span><span class="token punctuation" data-v-01712308>.</span>$message<span class="token punctuation" data-v-01712308>.</span><span class="token function" data-v-01712308>warning</span><span class="token punctuation" data-v-01712308>(</span><span class="token string" data-v-01712308>'最多只能绘制三个区域'</span><span class="token punctuation" data-v-01712308>)</span>
    <span class="token punctuation" data-v-01712308>}</span><span class="token punctuation" data-v-01712308>)</span>
  <span class="token punctuation" data-v-01712308>}</span><span class="token punctuation" data-v-01712308>,</span>
  methods<span class="token operator" data-v-01712308>:</span> <span class="token punctuation" data-v-01712308>{</span>
    <span class="token function" data-v-01712308>getMarkData2</span><span class="token punctuation" data-v-01712308>(</span><span class="token punctuation" data-v-01712308>)</span> <span class="token punctuation" data-v-01712308>{</span>
      console<span class="token punctuation" data-v-01712308>.</span><span class="token function" data-v-01712308>log</span><span class="token punctuation" data-v-01712308>(</span>mark2<span class="token punctuation" data-v-01712308>.</span><span class="token function" data-v-01712308>getMarkData</span><span class="token punctuation" data-v-01712308>(</span><span class="token punctuation" data-v-01712308>)</span><span class="token punctuation" data-v-01712308>,</span> <span class="token constant" data-v-01712308>JSON</span><span class="token punctuation" data-v-01712308>.</span><span class="token function" data-v-01712308>stringify</span><span class="token punctuation" data-v-01712308>(</span>mark2<span class="token punctuation" data-v-01712308>.</span><span class="token function" data-v-01712308>getMarkData</span><span class="token punctuation" data-v-01712308>(</span><span class="token punctuation" data-v-01712308>)</span><span class="token punctuation" data-v-01712308>)</span><span class="token punctuation" data-v-01712308>)</span>
    <span class="token punctuation" data-v-01712308>}</span><span class="token punctuation" data-v-01712308>,</span>
    <span class="token function" data-v-01712308>deleteItem2</span><span class="token punctuation" data-v-01712308>(</span><span class="token punctuation" data-v-01712308>)</span> <span class="token punctuation" data-v-01712308>{</span>
      mark2<span class="token punctuation" data-v-01712308>.</span><span class="token function" data-v-01712308>deleteMarkItem</span><span class="token punctuation" data-v-01712308>(</span><span class="token keyword" data-v-01712308>this</span><span class="token punctuation" data-v-01712308>.</span>curEditMarkItem2<span class="token punctuation" data-v-01712308>)</span>
    <span class="token punctuation" data-v-01712308>}</span><span class="token punctuation" data-v-01712308>,</span>
    <span class="token function" data-v-01712308>deleteAll2</span><span class="token punctuation" data-v-01712308>(</span><span class="token punctuation" data-v-01712308>)</span> <span class="token punctuation" data-v-01712308>{</span>
      mark2<span class="token punctuation" data-v-01712308>.</span><span class="token function" data-v-01712308>deleteAllMarkItem</span><span class="token punctuation" data-v-01712308>(</span><span class="token punctuation" data-v-01712308>)</span>
    <span class="token punctuation" data-v-01712308>}</span><span class="token punctuation" data-v-01712308>,</span>
    <span class="token function" data-v-01712308>create2</span><span class="token punctuation" data-v-01712308>(</span><span class="token punctuation" data-v-01712308>)</span> <span class="token punctuation" data-v-01712308>{</span>
      mark2<span class="token punctuation" data-v-01712308>.</span><span class="token function" data-v-01712308>createMarkItem</span><span class="token punctuation" data-v-01712308>(</span><span class="token punctuation" data-v-01712308>)</span>
    <span class="token punctuation" data-v-01712308>}</span><span class="token punctuation" data-v-01712308>,</span>
    <span class="token function" data-v-01712308>exit2</span><span class="token punctuation" data-v-01712308>(</span><span class="token punctuation" data-v-01712308>)</span> <span class="token punctuation" data-v-01712308>{</span>
      mark2<span class="token punctuation" data-v-01712308>.</span><span class="token function" data-v-01712308>exitCreate</span><span class="token punctuation" data-v-01712308>(</span><span class="token punctuation" data-v-01712308>)</span>
    <span class="token punctuation" data-v-01712308>}</span>
  <span class="token punctuation" data-v-01712308>}</span>
<span class="token punctuation" data-v-01712308>}</span>
</span></span><span class="token tag" data-v-01712308><span class="token tag" data-v-01712308><span class="token punctuation" data-v-01712308>&lt;/</span>script</span><span class="token punctuation" data-v-01712308>&gt;</span></span>

<span class="token tag" data-v-01712308><span class="token tag" data-v-01712308><span class="token punctuation" data-v-01712308>&lt;</span>style</span> <span class="token attr-name" data-v-01712308>lang</span><span class="token attr-value" data-v-01712308><span class="token punctuation" data-v-01712308>=</span><span class="token punctuation" data-v-01712308>&quot;</span>less<span class="token punctuation" data-v-01712308>&quot;</span></span> <span class="token attr-name" data-v-01712308>scoped</span><span class="token punctuation" data-v-01712308>&gt;</span></span><span class="token style" data-v-01712308><span class="token language-css" data-v-01712308>
<span class="token selector" data-v-01712308>.container</span> <span class="token punctuation" data-v-01712308>{</span>  
  <span class="token selector" data-v-01712308>.markBox</span> <span class="token punctuation" data-v-01712308>{</span>
    <span class="token property" data-v-01712308>width</span><span class="token punctuation" data-v-01712308>:</span> 600px<span class="token punctuation" data-v-01712308>;</span>
    <span class="token property" data-v-01712308>height</span><span class="token punctuation" data-v-01712308>:</span> 400px<span class="token punctuation" data-v-01712308>;</span>
    <span class="token property" data-v-01712308>background-color</span><span class="token punctuation" data-v-01712308>:</span> #f5f5f5<span class="token punctuation" data-v-01712308>;</span>
    <span class="token property" data-v-01712308>margin-bottom</span><span class="token punctuation" data-v-01712308>:</span> 10px<span class="token punctuation" data-v-01712308>;</span>
  <span class="token punctuation" data-v-01712308>}</span>
<span class="token punctuation" data-v-01712308>}</span>
</span></span><span class="token tag" data-v-01712308><span class="token tag" data-v-01712308><span class="token punctuation" data-v-01712308>&lt;/</span>style</span><span class="token punctuation" data-v-01712308>&gt;</span></span>
</code></pre></div><h2 id="特定形状" data-v-01712308><a href="#特定形状" class="header-anchor" data-v-01712308>#</a> 特定形状</h2><p data-v-01712308>有时候可能需要限制特定的形状，这可以通过<code data-v-01712308>shape</code>插件来实现，因为本人水平所限，只内置了正方形一种形状，你可以通过该插件来扩展你需要的形状支持。</p><p data-v-01712308>同时本示例也演示了在创建新标注时可通过第二个参数传入配置项，定义填充颜色等。</p><section class="code-box demo-" data-v-01712308><!----><section class="code-box-demo"><div class="container" data-v-01712308><div class="markBox" data-v-01712308></div><button type="button" title="" class="el-button el-button--primary" data-v-01712308><!----><!----><!----><span>创建形状</span></button><button disabled="disabled" type="button" title="" class="el-button el-button--primary is-disabled" data-v-01712308><!----><!----><!----><span>退出新增</span></button><button type="button" title="" class="el-button el-button--primary" data-v-01712308><!----><!----><!----><span>获取标注（控制台查看）</span></button><button disabled="disabled" type="button" title="" class="el-button el-button--primary is-disabled is-icon" data-v-01712308><!----><i class="h-icon-delete"></i><!----><!----></button><button type="button" title="" class="el-button el-button--primary is-icon is-icon-text" data-v-01712308><!----><i class="h-icon-delete"></i><!----><span>删除全部</span></button></div></section><section class="code-box-meta"><div class="code-box-title">特定形状</div><div class="code-box-desc"></div><span class="el-tooltip code-expand-icon"><i class="h-icon-angles_down_sm"></i></span></section><section class="code-box-highlight" style="display:none;"><div class="code-box-actions"></div></section></section><div class="language-vue extra-class" data-v-01712308><pre class="language-vue" data-v-01712308><code data-v-01712308><span class="token tag" data-v-01712308><span class="token tag" data-v-01712308><span class="token punctuation" data-v-01712308>&lt;</span>template</span><span class="token punctuation" data-v-01712308>&gt;</span></span>
<span class="token tag" data-v-01712308><span class="token tag" data-v-01712308><span class="token punctuation" data-v-01712308>&lt;</span>div</span> <span class="token attr-name" data-v-01712308>class</span><span class="token attr-value" data-v-01712308><span class="token punctuation" data-v-01712308>=</span><span class="token punctuation" data-v-01712308>&quot;</span>container<span class="token punctuation" data-v-01712308>&quot;</span></span> <span class="token attr-name" data-v-01712308>ref</span><span class="token attr-value" data-v-01712308><span class="token punctuation" data-v-01712308>=</span><span class="token punctuation" data-v-01712308>&quot;</span>container<span class="token punctuation" data-v-01712308>&quot;</span></span><span class="token punctuation" data-v-01712308>&gt;</span></span>
  <span class="token tag" data-v-01712308><span class="token tag" data-v-01712308><span class="token punctuation" data-v-01712308>&lt;</span>div</span> <span class="token attr-name" data-v-01712308>class</span><span class="token attr-value" data-v-01712308><span class="token punctuation" data-v-01712308>=</span><span class="token punctuation" data-v-01712308>&quot;</span>markBox<span class="token punctuation" data-v-01712308>&quot;</span></span> <span class="token attr-name" data-v-01712308>ref</span><span class="token attr-value" data-v-01712308><span class="token punctuation" data-v-01712308>=</span><span class="token punctuation" data-v-01712308>&quot;</span>markBox3<span class="token punctuation" data-v-01712308>&quot;</span></span><span class="token punctuation" data-v-01712308>&gt;</span></span><span class="token tag" data-v-01712308><span class="token tag" data-v-01712308><span class="token punctuation" data-v-01712308>&lt;/</span>div</span><span class="token punctuation" data-v-01712308>&gt;</span></span>
  <span class="token tag" data-v-01712308><span class="token tag" data-v-01712308><span class="token punctuation" data-v-01712308>&lt;</span>el-button</span> <span class="token attr-name" data-v-01712308>type</span><span class="token attr-value" data-v-01712308><span class="token punctuation" data-v-01712308>=</span><span class="token punctuation" data-v-01712308>&quot;</span>primary<span class="token punctuation" data-v-01712308>&quot;</span></span> <span class="token attr-name" data-v-01712308>@click</span><span class="token attr-value" data-v-01712308><span class="token punctuation" data-v-01712308>=</span><span class="token punctuation" data-v-01712308>&quot;</span>createShape3<span class="token punctuation" data-v-01712308>&quot;</span></span> <span class="token attr-name" data-v-01712308>:disabled</span><span class="token attr-value" data-v-01712308><span class="token punctuation" data-v-01712308>=</span><span class="token punctuation" data-v-01712308>&quot;</span>!editing3 || !!curEditMarkItem3<span class="token punctuation" data-v-01712308>&quot;</span></span><span class="token punctuation" data-v-01712308>&gt;</span></span>创建形状<span class="token tag" data-v-01712308><span class="token tag" data-v-01712308><span class="token punctuation" data-v-01712308>&lt;/</span>el-button</span><span class="token punctuation" data-v-01712308>&gt;</span></span>
  <span class="token tag" data-v-01712308><span class="token tag" data-v-01712308><span class="token punctuation" data-v-01712308>&lt;</span>el-button</span> <span class="token attr-name" data-v-01712308>type</span><span class="token attr-value" data-v-01712308><span class="token punctuation" data-v-01712308>=</span><span class="token punctuation" data-v-01712308>&quot;</span>primary<span class="token punctuation" data-v-01712308>&quot;</span></span> <span class="token attr-name" data-v-01712308>@click</span><span class="token attr-value" data-v-01712308><span class="token punctuation" data-v-01712308>=</span><span class="token punctuation" data-v-01712308>&quot;</span>exit3<span class="token punctuation" data-v-01712308>&quot;</span></span> <span class="token attr-name" data-v-01712308>:disabled</span><span class="token attr-value" data-v-01712308><span class="token punctuation" data-v-01712308>=</span><span class="token punctuation" data-v-01712308>&quot;</span>!isCreateMarking3<span class="token punctuation" data-v-01712308>&quot;</span></span><span class="token punctuation" data-v-01712308>&gt;</span></span>退出新增<span class="token tag" data-v-01712308><span class="token tag" data-v-01712308><span class="token punctuation" data-v-01712308>&lt;/</span>el-button</span><span class="token punctuation" data-v-01712308>&gt;</span></span>
  <span class="token tag" data-v-01712308><span class="token tag" data-v-01712308><span class="token punctuation" data-v-01712308>&lt;</span>el-button</span> <span class="token attr-name" data-v-01712308>type</span><span class="token attr-value" data-v-01712308><span class="token punctuation" data-v-01712308>=</span><span class="token punctuation" data-v-01712308>&quot;</span>primary<span class="token punctuation" data-v-01712308>&quot;</span></span> <span class="token attr-name" data-v-01712308>@click</span><span class="token attr-value" data-v-01712308><span class="token punctuation" data-v-01712308>=</span><span class="token punctuation" data-v-01712308>&quot;</span>getMarkData3<span class="token punctuation" data-v-01712308>&quot;</span></span><span class="token punctuation" data-v-01712308>&gt;</span></span>获取标注（控制台查看）<span class="token tag" data-v-01712308><span class="token tag" data-v-01712308><span class="token punctuation" data-v-01712308>&lt;/</span>el-button</span><span class="token punctuation" data-v-01712308>&gt;</span></span>
  <span class="token tag" data-v-01712308><span class="token tag" data-v-01712308><span class="token punctuation" data-v-01712308>&lt;</span>el-button</span> <span class="token attr-name" data-v-01712308>type</span><span class="token attr-value" data-v-01712308><span class="token punctuation" data-v-01712308>=</span><span class="token punctuation" data-v-01712308>&quot;</span>primary<span class="token punctuation" data-v-01712308>&quot;</span></span> <span class="token attr-name" data-v-01712308>icon</span><span class="token attr-value" data-v-01712308><span class="token punctuation" data-v-01712308>=</span><span class="token punctuation" data-v-01712308>&quot;</span>h-icon-delete<span class="token punctuation" data-v-01712308>&quot;</span></span> <span class="token attr-name" data-v-01712308>@click</span><span class="token attr-value" data-v-01712308><span class="token punctuation" data-v-01712308>=</span><span class="token punctuation" data-v-01712308>&quot;</span>deleteItem3<span class="token punctuation" data-v-01712308>&quot;</span></span> <span class="token attr-name" data-v-01712308>:disabled</span><span class="token attr-value" data-v-01712308><span class="token punctuation" data-v-01712308>=</span><span class="token punctuation" data-v-01712308>&quot;</span>!curEditMarkItem3<span class="token punctuation" data-v-01712308>&quot;</span></span><span class="token punctuation" data-v-01712308>&gt;</span></span><span class="token tag" data-v-01712308><span class="token tag" data-v-01712308><span class="token punctuation" data-v-01712308>&lt;/</span>el-button</span><span class="token punctuation" data-v-01712308>&gt;</span></span>
  <span class="token tag" data-v-01712308><span class="token tag" data-v-01712308><span class="token punctuation" data-v-01712308>&lt;</span>el-button</span> <span class="token attr-name" data-v-01712308>type</span><span class="token attr-value" data-v-01712308><span class="token punctuation" data-v-01712308>=</span><span class="token punctuation" data-v-01712308>&quot;</span>primary<span class="token punctuation" data-v-01712308>&quot;</span></span> <span class="token attr-name" data-v-01712308>icon</span><span class="token attr-value" data-v-01712308><span class="token punctuation" data-v-01712308>=</span><span class="token punctuation" data-v-01712308>&quot;</span>h-icon-delete<span class="token punctuation" data-v-01712308>&quot;</span></span> <span class="token attr-name" data-v-01712308>@click</span><span class="token attr-value" data-v-01712308><span class="token punctuation" data-v-01712308>=</span><span class="token punctuation" data-v-01712308>&quot;</span>deleteAll3<span class="token punctuation" data-v-01712308>&quot;</span></span><span class="token punctuation" data-v-01712308>&gt;</span></span>删除全部<span class="token tag" data-v-01712308><span class="token tag" data-v-01712308><span class="token punctuation" data-v-01712308>&lt;/</span>el-button</span><span class="token punctuation" data-v-01712308>&gt;</span></span>
<span class="token tag" data-v-01712308><span class="token tag" data-v-01712308><span class="token punctuation" data-v-01712308>&lt;/</span>div</span><span class="token punctuation" data-v-01712308>&gt;</span></span>  
<span class="token tag" data-v-01712308><span class="token tag" data-v-01712308><span class="token punctuation" data-v-01712308>&lt;/</span>template</span><span class="token punctuation" data-v-01712308>&gt;</span></span>

<span class="token tag" data-v-01712308><span class="token tag" data-v-01712308><span class="token punctuation" data-v-01712308>&lt;</span>script</span><span class="token punctuation" data-v-01712308>&gt;</span></span><span class="token script" data-v-01712308><span class="token language-javascript" data-v-01712308>
<span class="token keyword" data-v-01712308>import</span> Markjs <span class="token keyword" data-v-01712308>from</span> <span class="token string" data-v-01712308>'markjs'</span>
<span class="token keyword" data-v-01712308>import</span> mousePlugin <span class="token keyword" data-v-01712308>from</span> <span class="token string" data-v-01712308>'markjs/src/plugins/mouse'</span>
<span class="token keyword" data-v-01712308>import</span> shapePlugin <span class="token keyword" data-v-01712308>from</span> <span class="token string" data-v-01712308>'markjs/src/plugins/shape'</span>
Markjs<span class="token punctuation" data-v-01712308>.</span><span class="token function" data-v-01712308>use</span><span class="token punctuation" data-v-01712308>(</span>shapePlugin<span class="token punctuation" data-v-01712308>)</span>
Markjs<span class="token punctuation" data-v-01712308>.</span><span class="token function" data-v-01712308>use</span><span class="token punctuation" data-v-01712308>(</span>mousePlugin<span class="token punctuation" data-v-01712308>)</span>

<span class="token keyword" data-v-01712308>let</span> mark3 <span class="token operator" data-v-01712308>=</span> <span class="token keyword" data-v-01712308>null</span>
<span class="token keyword" data-v-01712308>export</span> <span class="token keyword" data-v-01712308>default</span> <span class="token punctuation" data-v-01712308>{</span>
  <span class="token function" data-v-01712308>data</span> <span class="token punctuation" data-v-01712308>(</span><span class="token punctuation" data-v-01712308>)</span> <span class="token punctuation" data-v-01712308>{</span>
    <span class="token keyword" data-v-01712308>return</span> <span class="token punctuation" data-v-01712308>{</span>
      editing3<span class="token operator" data-v-01712308>:</span> <span class="token boolean" data-v-01712308>true</span><span class="token punctuation" data-v-01712308>,</span>
      curEditMarkItem3<span class="token operator" data-v-01712308>:</span> <span class="token keyword" data-v-01712308>null</span><span class="token punctuation" data-v-01712308>,</span>
      isCreateMarking3<span class="token operator" data-v-01712308>:</span> <span class="token boolean" data-v-01712308>false</span>
    <span class="token punctuation" data-v-01712308>}</span>
  <span class="token punctuation" data-v-01712308>}</span><span class="token punctuation" data-v-01712308>,</span>
  <span class="token function" data-v-01712308>mounted</span> <span class="token punctuation" data-v-01712308>(</span><span class="token punctuation" data-v-01712308>)</span> <span class="token punctuation" data-v-01712308>{</span>
    mark3 <span class="token operator" data-v-01712308>=</span> <span class="token keyword" data-v-01712308>new</span> <span class="token class-name" data-v-01712308>Markjs</span><span class="token punctuation" data-v-01712308>(</span><span class="token punctuation" data-v-01712308>{</span>
      el<span class="token operator" data-v-01712308>:</span> <span class="token keyword" data-v-01712308>this</span><span class="token punctuation" data-v-01712308>.</span>$refs<span class="token punctuation" data-v-01712308>.</span>markBox3<span class="token punctuation" data-v-01712308>,</span>
      hoverActive<span class="token operator" data-v-01712308>:</span> <span class="token boolean" data-v-01712308>true</span>
    <span class="token punctuation" data-v-01712308>}</span><span class="token punctuation" data-v-01712308>)</span>
    mark3<span class="token punctuation" data-v-01712308>.</span><span class="token function" data-v-01712308>on</span><span class="token punctuation" data-v-01712308>(</span><span class="token string" data-v-01712308>'CURRENT-MARK-ITEM-CHANGE'</span><span class="token punctuation" data-v-01712308>,</span> <span class="token punctuation" data-v-01712308>(</span><span class="token parameter" data-v-01712308>item</span><span class="token punctuation" data-v-01712308>)</span> <span class="token operator" data-v-01712308>=&gt;</span> <span class="token punctuation" data-v-01712308>{</span>
      <span class="token keyword" data-v-01712308>this</span><span class="token punctuation" data-v-01712308>.</span>curEditMarkItem3 <span class="token operator" data-v-01712308>=</span> item
    <span class="token punctuation" data-v-01712308>}</span><span class="token punctuation" data-v-01712308>)</span>
    mark3<span class="token punctuation" data-v-01712308>.</span><span class="token function" data-v-01712308>on</span><span class="token punctuation" data-v-01712308>(</span><span class="token string" data-v-01712308>'IS-CREATE-MARKING-CHANGE'</span><span class="token punctuation" data-v-01712308>,</span> <span class="token punctuation" data-v-01712308>(</span><span class="token parameter" data-v-01712308>state</span><span class="token punctuation" data-v-01712308>)</span> <span class="token operator" data-v-01712308>=&gt;</span><span class="token punctuation" data-v-01712308>{</span>
      <span class="token keyword" data-v-01712308>this</span><span class="token punctuation" data-v-01712308>.</span>isCreateMarking3 <span class="token operator" data-v-01712308>=</span> state
    <span class="token punctuation" data-v-01712308>}</span><span class="token punctuation" data-v-01712308>)</span>
    mark3<span class="token punctuation" data-v-01712308>.</span><span class="token function" data-v-01712308>on</span><span class="token punctuation" data-v-01712308>(</span><span class="token string" data-v-01712308>'NOT-ENOUGH-END-POINTS'</span><span class="token punctuation" data-v-01712308>,</span> <span class="token punctuation" data-v-01712308>(</span><span class="token parameter" data-v-01712308>item</span><span class="token punctuation" data-v-01712308>)</span> <span class="token operator" data-v-01712308>=&gt;</span><span class="token punctuation" data-v-01712308>{</span>
      <span class="token keyword" data-v-01712308>this</span><span class="token punctuation" data-v-01712308>.</span>$message<span class="token punctuation" data-v-01712308>.</span><span class="token function" data-v-01712308>warning</span><span class="token punctuation" data-v-01712308>(</span><span class="token string" data-v-01712308>'至少需要绘制三个端点'</span><span class="token punctuation" data-v-01712308>)</span>
    <span class="token punctuation" data-v-01712308>}</span><span class="token punctuation" data-v-01712308>)</span>
  <span class="token punctuation" data-v-01712308>}</span><span class="token punctuation" data-v-01712308>,</span>
  methods<span class="token operator" data-v-01712308>:</span> <span class="token punctuation" data-v-01712308>{</span>
    <span class="token function" data-v-01712308>getMarkData3</span><span class="token punctuation" data-v-01712308>(</span><span class="token punctuation" data-v-01712308>)</span> <span class="token punctuation" data-v-01712308>{</span>
      console<span class="token punctuation" data-v-01712308>.</span><span class="token function" data-v-01712308>log</span><span class="token punctuation" data-v-01712308>(</span>mark3<span class="token punctuation" data-v-01712308>.</span><span class="token function" data-v-01712308>getMarkData</span><span class="token punctuation" data-v-01712308>(</span><span class="token punctuation" data-v-01712308>)</span><span class="token punctuation" data-v-01712308>,</span> <span class="token constant" data-v-01712308>JSON</span><span class="token punctuation" data-v-01712308>.</span><span class="token function" data-v-01712308>stringify</span><span class="token punctuation" data-v-01712308>(</span>mark3<span class="token punctuation" data-v-01712308>.</span><span class="token function" data-v-01712308>getMarkData</span><span class="token punctuation" data-v-01712308>(</span><span class="token punctuation" data-v-01712308>)</span><span class="token punctuation" data-v-01712308>)</span><span class="token punctuation" data-v-01712308>)</span>
    <span class="token punctuation" data-v-01712308>}</span><span class="token punctuation" data-v-01712308>,</span>
    <span class="token function" data-v-01712308>deleteItem3</span><span class="token punctuation" data-v-01712308>(</span><span class="token punctuation" data-v-01712308>)</span> <span class="token punctuation" data-v-01712308>{</span>
      mark3<span class="token punctuation" data-v-01712308>.</span><span class="token function" data-v-01712308>deleteMarkItem</span><span class="token punctuation" data-v-01712308>(</span><span class="token keyword" data-v-01712308>this</span><span class="token punctuation" data-v-01712308>.</span>curEditMarkItem3<span class="token punctuation" data-v-01712308>)</span>
    <span class="token punctuation" data-v-01712308>}</span><span class="token punctuation" data-v-01712308>,</span>
    <span class="token function" data-v-01712308>deleteAll3</span><span class="token punctuation" data-v-01712308>(</span><span class="token punctuation" data-v-01712308>)</span> <span class="token punctuation" data-v-01712308>{</span>
      mark3<span class="token punctuation" data-v-01712308>.</span><span class="token function" data-v-01712308>deleteAllMarkItem</span><span class="token punctuation" data-v-01712308>(</span><span class="token punctuation" data-v-01712308>)</span>
    <span class="token punctuation" data-v-01712308>}</span><span class="token punctuation" data-v-01712308>,</span>
    <span class="token function" data-v-01712308>exit3</span><span class="token punctuation" data-v-01712308>(</span><span class="token punctuation" data-v-01712308>)</span> <span class="token punctuation" data-v-01712308>{</span>
      mark3<span class="token punctuation" data-v-01712308>.</span><span class="token function" data-v-01712308>exitCreate</span><span class="token punctuation" data-v-01712308>(</span><span class="token punctuation" data-v-01712308>)</span>
    <span class="token punctuation" data-v-01712308>}</span><span class="token punctuation" data-v-01712308>,</span>
    <span class="token function" data-v-01712308>createShape3</span><span class="token punctuation" data-v-01712308>(</span><span class="token punctuation" data-v-01712308>)</span> <span class="token punctuation" data-v-01712308>{</span>
      mark3<span class="token punctuation" data-v-01712308>.</span><span class="token function" data-v-01712308>createShapeMarkItem</span><span class="token punctuation" data-v-01712308>(</span><span class="token string" data-v-01712308>'square'</span><span class="token punctuation" data-v-01712308>,</span> <span class="token punctuation" data-v-01712308>{</span>
        fillColor<span class="token operator" data-v-01712308>:</span> <span class="token string" data-v-01712308>'rgba(250,50,57,0.30)'</span>
      <span class="token punctuation" data-v-01712308>}</span><span class="token punctuation" data-v-01712308>)</span>
    <span class="token punctuation" data-v-01712308>}</span>
  <span class="token punctuation" data-v-01712308>}</span>
<span class="token punctuation" data-v-01712308>}</span>
</span></span><span class="token tag" data-v-01712308><span class="token tag" data-v-01712308><span class="token punctuation" data-v-01712308>&lt;/</span>script</span><span class="token punctuation" data-v-01712308>&gt;</span></span>

<span class="token tag" data-v-01712308><span class="token tag" data-v-01712308><span class="token punctuation" data-v-01712308>&lt;</span>style</span> <span class="token attr-name" data-v-01712308>lang</span><span class="token attr-value" data-v-01712308><span class="token punctuation" data-v-01712308>=</span><span class="token punctuation" data-v-01712308>&quot;</span>less<span class="token punctuation" data-v-01712308>&quot;</span></span> <span class="token attr-name" data-v-01712308>scoped</span><span class="token punctuation" data-v-01712308>&gt;</span></span><span class="token style" data-v-01712308><span class="token language-css" data-v-01712308>
<span class="token selector" data-v-01712308>.container</span> <span class="token punctuation" data-v-01712308>{</span>  
  <span class="token selector" data-v-01712308>.markBox</span> <span class="token punctuation" data-v-01712308>{</span>
    <span class="token property" data-v-01712308>width</span><span class="token punctuation" data-v-01712308>:</span> 600px<span class="token punctuation" data-v-01712308>;</span>
    <span class="token property" data-v-01712308>height</span><span class="token punctuation" data-v-01712308>:</span> 400px<span class="token punctuation" data-v-01712308>;</span>
    <span class="token property" data-v-01712308>background-color</span><span class="token punctuation" data-v-01712308>:</span> #f5f5f5<span class="token punctuation" data-v-01712308>;</span>
    <span class="token property" data-v-01712308>margin-bottom</span><span class="token punctuation" data-v-01712308>:</span> 10px<span class="token punctuation" data-v-01712308>;</span>
  <span class="token punctuation" data-v-01712308>}</span>
<span class="token punctuation" data-v-01712308>}</span>
</span></span><span class="token tag" data-v-01712308><span class="token tag" data-v-01712308><span class="token punctuation" data-v-01712308>&lt;/</span>style</span><span class="token punctuation" data-v-01712308>&gt;</span></span>
</code></pre></div><h2 id="单独编辑" data-v-01712308><a href="#单独编辑" class="header-anchor" data-v-01712308>#</a> 单独编辑</h2><p data-v-01712308>默认情况下激活某个区域进行标注时其他非激活标注仍然会存在，可以通过设置属性<code data-v-01712308>single</code>为<code data-v-01712308>true</code>来控制只显示激活的那个标注区域。</p><section class="code-box demo-" data-v-01712308><!----><section class="code-box-demo"><div class="container" data-v-01712308><div class="markBox" data-v-01712308></div><button type="button" title="" class="el-button el-button--primary" data-v-01712308><!----><!----><!----><span>新增标注</span></button><button disabled="disabled" type="button" title="" class="el-button el-button--primary is-disabled" data-v-01712308><!----><!----><!----><span>退出新增</span></button><button type="button" title="" class="el-button el-button--primary" data-v-01712308><!----><!----><!----><span>获取标注（控制台查看）</span></button><button disabled="disabled" type="button" title="" class="el-button el-button--primary is-disabled is-icon" data-v-01712308><!----><i class="h-icon-delete"></i><!----><!----></button><button type="button" title="" class="el-button el-button--primary is-icon is-icon-text" data-v-01712308><!----><i class="h-icon-delete"></i><!----><span>删除全部</span></button></div></section><section class="code-box-meta"><div class="code-box-title">单独编辑</div><div class="code-box-desc"></div><span class="el-tooltip code-expand-icon"><i class="h-icon-angles_down_sm"></i></span></section><section class="code-box-highlight" style="display:none;"><div class="code-box-actions"></div></section></section><div class="language-vue extra-class" data-v-01712308><pre class="language-vue" data-v-01712308><code data-v-01712308><span class="token tag" data-v-01712308><span class="token tag" data-v-01712308><span class="token punctuation" data-v-01712308>&lt;</span>template</span><span class="token punctuation" data-v-01712308>&gt;</span></span>
  <span class="token tag" data-v-01712308><span class="token tag" data-v-01712308><span class="token punctuation" data-v-01712308>&lt;</span>div</span> <span class="token attr-name" data-v-01712308>class</span><span class="token attr-value" data-v-01712308><span class="token punctuation" data-v-01712308>=</span><span class="token punctuation" data-v-01712308>&quot;</span>container<span class="token punctuation" data-v-01712308>&quot;</span></span><span class="token punctuation" data-v-01712308>&gt;</span></span>
    <span class="token tag" data-v-01712308><span class="token tag" data-v-01712308><span class="token punctuation" data-v-01712308>&lt;</span>div</span> <span class="token attr-name" data-v-01712308>class</span><span class="token attr-value" data-v-01712308><span class="token punctuation" data-v-01712308>=</span><span class="token punctuation" data-v-01712308>&quot;</span>markBox<span class="token punctuation" data-v-01712308>&quot;</span></span> <span class="token attr-name" data-v-01712308>ref</span><span class="token attr-value" data-v-01712308><span class="token punctuation" data-v-01712308>=</span><span class="token punctuation" data-v-01712308>&quot;</span>markBox4<span class="token punctuation" data-v-01712308>&quot;</span></span><span class="token punctuation" data-v-01712308>&gt;</span></span><span class="token tag" data-v-01712308><span class="token tag" data-v-01712308><span class="token punctuation" data-v-01712308>&lt;/</span>div</span><span class="token punctuation" data-v-01712308>&gt;</span></span>
    <span class="token tag" data-v-01712308><span class="token tag" data-v-01712308><span class="token punctuation" data-v-01712308>&lt;</span>el-button</span> <span class="token attr-name" data-v-01712308>type</span><span class="token attr-value" data-v-01712308><span class="token punctuation" data-v-01712308>=</span><span class="token punctuation" data-v-01712308>&quot;</span>primary<span class="token punctuation" data-v-01712308>&quot;</span></span> <span class="token attr-name" data-v-01712308>@click</span><span class="token attr-value" data-v-01712308><span class="token punctuation" data-v-01712308>=</span><span class="token punctuation" data-v-01712308>&quot;</span>create4<span class="token punctuation" data-v-01712308>&quot;</span></span> <span class="token attr-name" data-v-01712308>:disabled</span><span class="token attr-value" data-v-01712308><span class="token punctuation" data-v-01712308>=</span><span class="token punctuation" data-v-01712308>&quot;</span>!editing4 || !!curEditMarkItem4<span class="token punctuation" data-v-01712308>&quot;</span></span><span class="token punctuation" data-v-01712308>&gt;</span></span>新增标注<span class="token tag" data-v-01712308><span class="token tag" data-v-01712308><span class="token punctuation" data-v-01712308>&lt;/</span>el-button</span><span class="token punctuation" data-v-01712308>&gt;</span></span>
    <span class="token tag" data-v-01712308><span class="token tag" data-v-01712308><span class="token punctuation" data-v-01712308>&lt;</span>el-button</span> <span class="token attr-name" data-v-01712308>type</span><span class="token attr-value" data-v-01712308><span class="token punctuation" data-v-01712308>=</span><span class="token punctuation" data-v-01712308>&quot;</span>primary<span class="token punctuation" data-v-01712308>&quot;</span></span> <span class="token attr-name" data-v-01712308>@click</span><span class="token attr-value" data-v-01712308><span class="token punctuation" data-v-01712308>=</span><span class="token punctuation" data-v-01712308>&quot;</span>exit4<span class="token punctuation" data-v-01712308>&quot;</span></span> <span class="token attr-name" data-v-01712308>:disabled</span><span class="token attr-value" data-v-01712308><span class="token punctuation" data-v-01712308>=</span><span class="token punctuation" data-v-01712308>&quot;</span>!isCreateMarking4<span class="token punctuation" data-v-01712308>&quot;</span></span><span class="token punctuation" data-v-01712308>&gt;</span></span>退出新增<span class="token tag" data-v-01712308><span class="token tag" data-v-01712308><span class="token punctuation" data-v-01712308>&lt;/</span>el-button</span><span class="token punctuation" data-v-01712308>&gt;</span></span>
    <span class="token tag" data-v-01712308><span class="token tag" data-v-01712308><span class="token punctuation" data-v-01712308>&lt;</span>el-button</span> <span class="token attr-name" data-v-01712308>type</span><span class="token attr-value" data-v-01712308><span class="token punctuation" data-v-01712308>=</span><span class="token punctuation" data-v-01712308>&quot;</span>primary<span class="token punctuation" data-v-01712308>&quot;</span></span> <span class="token attr-name" data-v-01712308>@click</span><span class="token attr-value" data-v-01712308><span class="token punctuation" data-v-01712308>=</span><span class="token punctuation" data-v-01712308>&quot;</span>getMarkData4<span class="token punctuation" data-v-01712308>&quot;</span></span><span class="token punctuation" data-v-01712308>&gt;</span></span>获取标注（控制台查看）<span class="token tag" data-v-01712308><span class="token tag" data-v-01712308><span class="token punctuation" data-v-01712308>&lt;/</span>el-button</span><span class="token punctuation" data-v-01712308>&gt;</span></span>
    <span class="token tag" data-v-01712308><span class="token tag" data-v-01712308><span class="token punctuation" data-v-01712308>&lt;</span>el-button</span> <span class="token attr-name" data-v-01712308>type</span><span class="token attr-value" data-v-01712308><span class="token punctuation" data-v-01712308>=</span><span class="token punctuation" data-v-01712308>&quot;</span>primary<span class="token punctuation" data-v-01712308>&quot;</span></span> <span class="token attr-name" data-v-01712308>icon</span><span class="token attr-value" data-v-01712308><span class="token punctuation" data-v-01712308>=</span><span class="token punctuation" data-v-01712308>&quot;</span>h-icon-delete<span class="token punctuation" data-v-01712308>&quot;</span></span> <span class="token attr-name" data-v-01712308>@click</span><span class="token attr-value" data-v-01712308><span class="token punctuation" data-v-01712308>=</span><span class="token punctuation" data-v-01712308>&quot;</span>deleteItem4<span class="token punctuation" data-v-01712308>&quot;</span></span> <span class="token attr-name" data-v-01712308>:disabled</span><span class="token attr-value" data-v-01712308><span class="token punctuation" data-v-01712308>=</span><span class="token punctuation" data-v-01712308>&quot;</span>!curEditMarkItem4<span class="token punctuation" data-v-01712308>&quot;</span></span><span class="token punctuation" data-v-01712308>&gt;</span></span><span class="token tag" data-v-01712308><span class="token tag" data-v-01712308><span class="token punctuation" data-v-01712308>&lt;/</span>el-button</span><span class="token punctuation" data-v-01712308>&gt;</span></span>
    <span class="token tag" data-v-01712308><span class="token tag" data-v-01712308><span class="token punctuation" data-v-01712308>&lt;</span>el-button</span> <span class="token attr-name" data-v-01712308>type</span><span class="token attr-value" data-v-01712308><span class="token punctuation" data-v-01712308>=</span><span class="token punctuation" data-v-01712308>&quot;</span>primary<span class="token punctuation" data-v-01712308>&quot;</span></span> <span class="token attr-name" data-v-01712308>icon</span><span class="token attr-value" data-v-01712308><span class="token punctuation" data-v-01712308>=</span><span class="token punctuation" data-v-01712308>&quot;</span>h-icon-delete<span class="token punctuation" data-v-01712308>&quot;</span></span> <span class="token attr-name" data-v-01712308>@click</span><span class="token attr-value" data-v-01712308><span class="token punctuation" data-v-01712308>=</span><span class="token punctuation" data-v-01712308>&quot;</span>deleteAll4<span class="token punctuation" data-v-01712308>&quot;</span></span><span class="token punctuation" data-v-01712308>&gt;</span></span>删除全部<span class="token tag" data-v-01712308><span class="token tag" data-v-01712308><span class="token punctuation" data-v-01712308>&lt;/</span>el-button</span><span class="token punctuation" data-v-01712308>&gt;</span></span>
  <span class="token tag" data-v-01712308><span class="token tag" data-v-01712308><span class="token punctuation" data-v-01712308>&lt;/</span>div</span><span class="token punctuation" data-v-01712308>&gt;</span></span>
<span class="token tag" data-v-01712308><span class="token tag" data-v-01712308><span class="token punctuation" data-v-01712308>&lt;/</span>template</span><span class="token punctuation" data-v-01712308>&gt;</span></span>

<span class="token tag" data-v-01712308><span class="token tag" data-v-01712308><span class="token punctuation" data-v-01712308>&lt;</span>script</span><span class="token punctuation" data-v-01712308>&gt;</span></span><span class="token script" data-v-01712308><span class="token language-javascript" data-v-01712308>
<span class="token keyword" data-v-01712308>import</span> Markjs <span class="token keyword" data-v-01712308>from</span> <span class="token string" data-v-01712308>'markjs'</span>
<span class="token keyword" data-v-01712308>import</span> mousePlugin <span class="token keyword" data-v-01712308>from</span> <span class="token string" data-v-01712308>'markjs/src/plugins/mouse'</span>
Markjs<span class="token punctuation" data-v-01712308>.</span><span class="token function" data-v-01712308>use</span><span class="token punctuation" data-v-01712308>(</span>mousePlugin<span class="token punctuation" data-v-01712308>)</span>

<span class="token keyword" data-v-01712308>let</span> mark4 <span class="token operator" data-v-01712308>=</span> <span class="token keyword" data-v-01712308>null</span>
<span class="token keyword" data-v-01712308>export</span> <span class="token keyword" data-v-01712308>default</span> <span class="token punctuation" data-v-01712308>{</span>
  <span class="token function" data-v-01712308>data</span> <span class="token punctuation" data-v-01712308>(</span><span class="token punctuation" data-v-01712308>)</span> <span class="token punctuation" data-v-01712308>{</span>
    <span class="token keyword" data-v-01712308>return</span> <span class="token punctuation" data-v-01712308>{</span>
      editing4<span class="token operator" data-v-01712308>:</span> <span class="token boolean" data-v-01712308>true</span><span class="token punctuation" data-v-01712308>,</span>
      curEditMarkItem4<span class="token operator" data-v-01712308>:</span> <span class="token keyword" data-v-01712308>null</span><span class="token punctuation" data-v-01712308>,</span>
      isCreateMarking4<span class="token operator" data-v-01712308>:</span> <span class="token boolean" data-v-01712308>false</span><span class="token punctuation" data-v-01712308>,</span>
    <span class="token punctuation" data-v-01712308>}</span>
  <span class="token punctuation" data-v-01712308>}</span><span class="token punctuation" data-v-01712308>,</span>
  <span class="token function" data-v-01712308>mounted</span> <span class="token punctuation" data-v-01712308>(</span><span class="token punctuation" data-v-01712308>)</span> <span class="token punctuation" data-v-01712308>{</span>
    mark4 <span class="token operator" data-v-01712308>=</span> <span class="token keyword" data-v-01712308>new</span> <span class="token class-name" data-v-01712308>Markjs</span><span class="token punctuation" data-v-01712308>(</span><span class="token punctuation" data-v-01712308>{</span>
      el<span class="token operator" data-v-01712308>:</span> <span class="token keyword" data-v-01712308>this</span><span class="token punctuation" data-v-01712308>.</span>$refs<span class="token punctuation" data-v-01712308>.</span>markBox4<span class="token punctuation" data-v-01712308>,</span>
      hoverActive<span class="token operator" data-v-01712308>:</span> <span class="token boolean" data-v-01712308>true</span><span class="token punctuation" data-v-01712308>,</span>
      single<span class="token operator" data-v-01712308>:</span> <span class="token boolean" data-v-01712308>true</span>
    <span class="token punctuation" data-v-01712308>}</span><span class="token punctuation" data-v-01712308>)</span>
    mark4<span class="token punctuation" data-v-01712308>.</span><span class="token function" data-v-01712308>on</span><span class="token punctuation" data-v-01712308>(</span><span class="token string" data-v-01712308>'CURRENT-MARK-ITEM-CHANGE'</span><span class="token punctuation" data-v-01712308>,</span> <span class="token punctuation" data-v-01712308>(</span><span class="token parameter" data-v-01712308>item</span><span class="token punctuation" data-v-01712308>)</span> <span class="token operator" data-v-01712308>=&gt;</span> <span class="token punctuation" data-v-01712308>{</span>
      <span class="token keyword" data-v-01712308>this</span><span class="token punctuation" data-v-01712308>.</span>curEditMarkItem4 <span class="token operator" data-v-01712308>=</span> item
    <span class="token punctuation" data-v-01712308>}</span><span class="token punctuation" data-v-01712308>)</span>
    mark4<span class="token punctuation" data-v-01712308>.</span><span class="token function" data-v-01712308>on</span><span class="token punctuation" data-v-01712308>(</span><span class="token string" data-v-01712308>'IS-CREATE-MARKING-CHANGE'</span><span class="token punctuation" data-v-01712308>,</span> <span class="token punctuation" data-v-01712308>(</span><span class="token parameter" data-v-01712308>state</span><span class="token punctuation" data-v-01712308>)</span> <span class="token operator" data-v-01712308>=&gt;</span><span class="token punctuation" data-v-01712308>{</span>
      <span class="token keyword" data-v-01712308>this</span><span class="token punctuation" data-v-01712308>.</span>isCreateMarking4 <span class="token operator" data-v-01712308>=</span> state
    <span class="token punctuation" data-v-01712308>}</span><span class="token punctuation" data-v-01712308>)</span>
    mark4<span class="token punctuation" data-v-01712308>.</span><span class="token function" data-v-01712308>on</span><span class="token punctuation" data-v-01712308>(</span><span class="token string" data-v-01712308>'NOT-ENOUGH-END-POINTS'</span><span class="token punctuation" data-v-01712308>,</span> <span class="token punctuation" data-v-01712308>(</span><span class="token parameter" data-v-01712308>item</span><span class="token punctuation" data-v-01712308>)</span> <span class="token operator" data-v-01712308>=&gt;</span><span class="token punctuation" data-v-01712308>{</span>
      <span class="token keyword" data-v-01712308>this</span><span class="token punctuation" data-v-01712308>.</span>$message<span class="token punctuation" data-v-01712308>.</span><span class="token function" data-v-01712308>warning</span><span class="token punctuation" data-v-01712308>(</span><span class="token string" data-v-01712308>'至少需要绘制三个端点'</span><span class="token punctuation" data-v-01712308>)</span>
    <span class="token punctuation" data-v-01712308>}</span><span class="token punctuation" data-v-01712308>)</span>
  <span class="token punctuation" data-v-01712308>}</span><span class="token punctuation" data-v-01712308>,</span>
  methods<span class="token operator" data-v-01712308>:</span> <span class="token punctuation" data-v-01712308>{</span>
    <span class="token function" data-v-01712308>getMarkData4</span><span class="token punctuation" data-v-01712308>(</span><span class="token punctuation" data-v-01712308>)</span> <span class="token punctuation" data-v-01712308>{</span>
      console<span class="token punctuation" data-v-01712308>.</span><span class="token function" data-v-01712308>log</span><span class="token punctuation" data-v-01712308>(</span>mark4<span class="token punctuation" data-v-01712308>.</span><span class="token function" data-v-01712308>getMarkData</span><span class="token punctuation" data-v-01712308>(</span><span class="token punctuation" data-v-01712308>)</span><span class="token punctuation" data-v-01712308>,</span> <span class="token constant" data-v-01712308>JSON</span><span class="token punctuation" data-v-01712308>.</span><span class="token function" data-v-01712308>stringify</span><span class="token punctuation" data-v-01712308>(</span>mark4<span class="token punctuation" data-v-01712308>.</span><span class="token function" data-v-01712308>getMarkData</span><span class="token punctuation" data-v-01712308>(</span><span class="token punctuation" data-v-01712308>)</span><span class="token punctuation" data-v-01712308>)</span><span class="token punctuation" data-v-01712308>)</span>
    <span class="token punctuation" data-v-01712308>}</span><span class="token punctuation" data-v-01712308>,</span>
    <span class="token function" data-v-01712308>deleteItem4</span><span class="token punctuation" data-v-01712308>(</span><span class="token punctuation" data-v-01712308>)</span> <span class="token punctuation" data-v-01712308>{</span>
      mark4<span class="token punctuation" data-v-01712308>.</span><span class="token function" data-v-01712308>deleteMarkItem</span><span class="token punctuation" data-v-01712308>(</span><span class="token keyword" data-v-01712308>this</span><span class="token punctuation" data-v-01712308>.</span>curEditMarkItem4<span class="token punctuation" data-v-01712308>)</span>
    <span class="token punctuation" data-v-01712308>}</span><span class="token punctuation" data-v-01712308>,</span>
    <span class="token function" data-v-01712308>deleteAll4</span><span class="token punctuation" data-v-01712308>(</span><span class="token punctuation" data-v-01712308>)</span> <span class="token punctuation" data-v-01712308>{</span>
      mark4<span class="token punctuation" data-v-01712308>.</span><span class="token function" data-v-01712308>deleteAllMarkItem</span><span class="token punctuation" data-v-01712308>(</span><span class="token punctuation" data-v-01712308>)</span>
    <span class="token punctuation" data-v-01712308>}</span><span class="token punctuation" data-v-01712308>,</span>
    <span class="token function" data-v-01712308>create4</span><span class="token punctuation" data-v-01712308>(</span><span class="token punctuation" data-v-01712308>)</span> <span class="token punctuation" data-v-01712308>{</span>
      mark4<span class="token punctuation" data-v-01712308>.</span><span class="token function" data-v-01712308>createMarkItem</span><span class="token punctuation" data-v-01712308>(</span><span class="token punctuation" data-v-01712308>)</span>
    <span class="token punctuation" data-v-01712308>}</span><span class="token punctuation" data-v-01712308>,</span>
    <span class="token function" data-v-01712308>exit4</span><span class="token punctuation" data-v-01712308>(</span><span class="token punctuation" data-v-01712308>)</span> <span class="token punctuation" data-v-01712308>{</span>
      mark4<span class="token punctuation" data-v-01712308>.</span><span class="token function" data-v-01712308>exitCreate</span><span class="token punctuation" data-v-01712308>(</span><span class="token punctuation" data-v-01712308>)</span>
    <span class="token punctuation" data-v-01712308>}</span>
  <span class="token punctuation" data-v-01712308>}</span>
<span class="token punctuation" data-v-01712308>}</span>
</span></span><span class="token tag" data-v-01712308><span class="token tag" data-v-01712308><span class="token punctuation" data-v-01712308>&lt;/</span>script</span><span class="token punctuation" data-v-01712308>&gt;</span></span>

<span class="token tag" data-v-01712308><span class="token tag" data-v-01712308><span class="token punctuation" data-v-01712308>&lt;</span>style</span> <span class="token attr-name" data-v-01712308>lang</span><span class="token attr-value" data-v-01712308><span class="token punctuation" data-v-01712308>=</span><span class="token punctuation" data-v-01712308>&quot;</span>less<span class="token punctuation" data-v-01712308>&quot;</span></span> <span class="token attr-name" data-v-01712308>scoped</span><span class="token punctuation" data-v-01712308>&gt;</span></span><span class="token style" data-v-01712308><span class="token language-css" data-v-01712308>
<span class="token selector" data-v-01712308>.container</span> <span class="token punctuation" data-v-01712308>{</span>  
  <span class="token selector" data-v-01712308>.markBox</span> <span class="token punctuation" data-v-01712308>{</span>
    <span class="token property" data-v-01712308>width</span><span class="token punctuation" data-v-01712308>:</span> 600px<span class="token punctuation" data-v-01712308>;</span>
    <span class="token property" data-v-01712308>height</span><span class="token punctuation" data-v-01712308>:</span> 400px<span class="token punctuation" data-v-01712308>;</span>
    <span class="token property" data-v-01712308>background-color</span><span class="token punctuation" data-v-01712308>:</span> #f5f5f5<span class="token punctuation" data-v-01712308>;</span>
    <span class="token property" data-v-01712308>margin-bottom</span><span class="token punctuation" data-v-01712308>:</span> 10px<span class="token punctuation" data-v-01712308>;</span>
  <span class="token punctuation" data-v-01712308>}</span>
<span class="token punctuation" data-v-01712308>}</span>
</span></span><span class="token tag" data-v-01712308><span class="token tag" data-v-01712308><span class="token punctuation" data-v-01712308>&lt;/</span>style</span><span class="token punctuation" data-v-01712308>&gt;</span></span>
</code></pre></div><h2 id="综合示例" data-v-01712308><a href="#综合示例" class="header-anchor" data-v-01712308>#</a> 综合示例</h2><p data-v-01712308>这个示例演示了大部分的配置项。</p><p data-v-01712308>初始设通过<code data-v-01712308>readonly</code>为<code data-v-01712308>true</code>设为只读模式，通过方法开启为编辑模式。</p><p data-v-01712308>回显了部分数据，包括特定形状，回显可设置单独的样式。</p><section class="code-box demo-" data-v-01712308><!----><section class="code-box-demo"><div class="container" data-v-01712308><div class="markBox" data-v-01712308></div><button type="button" title="" class="el-button el-button--primary" data-v-01712308><!----><!----><!----><span>切换到编辑模式</span></button><button disabled="disabled" type="button" title="" class="el-button el-button--primary is-disabled" data-v-01712308><!----><!----><!----><span>新增标注</span></button><button disabled="disabled" type="button" title="" class="el-button el-button--primary is-disabled" data-v-01712308><!----><!----><!----><span>创建形状</span></button><button disabled="disabled" type="button" title="" class="el-button el-button--primary is-disabled" data-v-01712308><!----><!----><!----><span>退出新增</span></button><button type="button" title="" class="el-button el-button--primary" data-v-01712308><!----><!----><!----><span>获取标注（控制台查看）</span></button><button disabled="disabled" type="button" title="" class="el-button el-button--primary is-disabled is-icon" data-v-01712308><!----><i class="h-icon-delete"></i><!----><!----></button><button type="button" title="" class="el-button el-button--primary is-icon is-icon-text" data-v-01712308><!----><i class="h-icon-delete"></i><!----><span>删除全部</span></button></div></section><section class="code-box-meta"><div class="code-box-title">综合示例</div><div class="code-box-desc"></div><span class="el-tooltip code-expand-icon"><i class="h-icon-angles_down_sm"></i></span></section><section class="code-box-highlight" style="display:none;"><div class="code-box-actions"></div></section></section><div class="language-vue extra-class" data-v-01712308><pre class="language-vue" data-v-01712308><code data-v-01712308><span class="token tag" data-v-01712308><span class="token tag" data-v-01712308><span class="token punctuation" data-v-01712308>&lt;</span>template</span><span class="token punctuation" data-v-01712308>&gt;</span></span>
  <span class="token tag" data-v-01712308><span class="token tag" data-v-01712308><span class="token punctuation" data-v-01712308>&lt;</span>div</span> <span class="token attr-name" data-v-01712308>class</span><span class="token attr-value" data-v-01712308><span class="token punctuation" data-v-01712308>=</span><span class="token punctuation" data-v-01712308>&quot;</span>container<span class="token punctuation" data-v-01712308>&quot;</span></span><span class="token punctuation" data-v-01712308>&gt;</span></span><span class="token tag" data-v-01712308><span class="token tag" data-v-01712308><span class="token punctuation" data-v-01712308>&lt;/</span>div</span><span class="token punctuation" data-v-01712308>&gt;</span></span>
<span class="token tag" data-v-01712308><span class="token tag" data-v-01712308><span class="token punctuation" data-v-01712308>&lt;/</span>template</span><span class="token punctuation" data-v-01712308>&gt;</span></span>

<span class="token tag" data-v-01712308><span class="token tag" data-v-01712308><span class="token punctuation" data-v-01712308>&lt;</span>script</span><span class="token punctuation" data-v-01712308>&gt;</span></span><span class="token script" data-v-01712308><span class="token language-javascript" data-v-01712308>

</span></span><span class="token tag" data-v-01712308><span class="token tag" data-v-01712308><span class="token punctuation" data-v-01712308>&lt;/</span>script</span><span class="token punctuation" data-v-01712308>&gt;</span></span>

<span class="token tag" data-v-01712308><span class="token tag" data-v-01712308><span class="token punctuation" data-v-01712308>&lt;</span>style</span> <span class="token attr-name" data-v-01712308>lang</span><span class="token attr-value" data-v-01712308><span class="token punctuation" data-v-01712308>=</span><span class="token punctuation" data-v-01712308>&quot;</span>less<span class="token punctuation" data-v-01712308>&quot;</span></span> <span class="token attr-name" data-v-01712308>scoped</span><span class="token punctuation" data-v-01712308>&gt;</span></span><span class="token style" data-v-01712308><span class="token language-css" data-v-01712308>
<span class="token selector" data-v-01712308>.container</span> <span class="token punctuation" data-v-01712308>{</span>  
  <span class="token selector" data-v-01712308>.markBox</span> <span class="token punctuation" data-v-01712308>{</span>
    <span class="token property" data-v-01712308>width</span><span class="token punctuation" data-v-01712308>:</span> 600px<span class="token punctuation" data-v-01712308>;</span>
    <span class="token property" data-v-01712308>height</span><span class="token punctuation" data-v-01712308>:</span> 400px<span class="token punctuation" data-v-01712308>;</span>
    <span class="token property" data-v-01712308>background-color</span><span class="token punctuation" data-v-01712308>:</span> #f5f5f5<span class="token punctuation" data-v-01712308>;</span>
    <span class="token property" data-v-01712308>margin-bottom</span><span class="token punctuation" data-v-01712308>:</span> 10px<span class="token punctuation" data-v-01712308>;</span>
  <span class="token punctuation" data-v-01712308>}</span>
<span class="token punctuation" data-v-01712308>}</span>
</span></span><span class="token tag" data-v-01712308><span class="token tag" data-v-01712308><span class="token punctuation" data-v-01712308>&lt;/</span>style</span><span class="token punctuation" data-v-01712308>&gt;</span></span>
</code></pre></div><h2 id="api" data-v-01712308><a href="#api" class="header-anchor" data-v-01712308>#</a> API</h2><div class="language-js extra-class" data-v-01712308><pre class="language-js" data-v-01712308><code data-v-01712308><span class="token keyword" data-v-01712308>import</span> Markjs <span class="token keyword" data-v-01712308>from</span> <span class="token string" data-v-01712308>'Markjs'</span>
</code></pre></div><h3 id="_1-类" data-v-01712308><a href="#_1-类" class="header-anchor" data-v-01712308>#</a> 1.类</h3><h3 id="属性" data-v-01712308><a href="#属性" class="header-anchor" data-v-01712308>#</a> 属性</h3><table data-v-01712308><thead data-v-01712308><tr data-v-01712308><th data-v-01712308>参数</th><th data-v-01712308>说明</th><th data-v-01712308>类型</th><th data-v-01712308>可选值</th><th data-v-01712308>默认值</th></tr></thead><tbody data-v-01712308><tr data-v-01712308><td data-v-01712308>pluginList</td><td data-v-01712308>插件列表</td><td data-v-01712308>Array</td><td data-v-01712308>—</td><td data-v-01712308>[]</td></tr></tbody></table><div class="language-js extra-class" data-v-01712308><pre class="language-js" data-v-01712308><code data-v-01712308>console<span class="token punctuation" data-v-01712308>.</span><span class="token function" data-v-01712308>log</span><span class="token punctuation" data-v-01712308>(</span>Markjs<span class="token punctuation" data-v-01712308>.</span>pluginList<span class="token punctuation" data-v-01712308>)</span>
</code></pre></div><h3 id="方法" data-v-01712308><a href="#方法" class="header-anchor" data-v-01712308>#</a> 方法</h3><table data-v-01712308><thead data-v-01712308><tr data-v-01712308><th data-v-01712308>方法名</th><th data-v-01712308>说明</th><th data-v-01712308>参数</th></tr></thead><tbody data-v-01712308><tr data-v-01712308><td data-v-01712308>use</td><td data-v-01712308>注册插件</td><td data-v-01712308>plugin（插件函数）, index（可选，注册位置，默认是添加在数组末尾，可通过该索引来控制插入的位置）</td></tr></tbody></table><div class="language-js extra-class" data-v-01712308><pre class="language-js" data-v-01712308><code data-v-01712308><span class="token keyword" data-v-01712308>import</span> imgPlugin <span class="token keyword" data-v-01712308>from</span> <span class="token string" data-v-01712308>'markjs/src/plugins/img'</span>
Markjs<span class="token punctuation" data-v-01712308>.</span><span class="token function" data-v-01712308>use</span><span class="token punctuation" data-v-01712308>(</span>imgPlugin<span class="token punctuation" data-v-01712308>,</span> <span class="token number" data-v-01712308>0</span><span class="token punctuation" data-v-01712308>)</span>
</code></pre></div><h3 id="_2-实例" data-v-01712308><a href="#_2-实例" class="header-anchor" data-v-01712308>#</a> 2.实例</h3><div class="language-js extra-class" data-v-01712308><pre class="language-js" data-v-01712308><code data-v-01712308><span class="token keyword" data-v-01712308>let</span> mark <span class="token operator" data-v-01712308>=</span> <span class="token keyword" data-v-01712308>new</span> <span class="token class-name" data-v-01712308>Markjs</span><span class="token punctuation" data-v-01712308>(</span>opt<span class="token punctuation" data-v-01712308>)</span>
</code></pre></div><h4 id="入参opt" data-v-01712308><a href="#入参opt" class="header-anchor" data-v-01712308>#</a> 入参opt</h4><p data-v-01712308>如果使用了某个插件，该插件的配置参数也是在这里进行传入。</p><table data-v-01712308><thead data-v-01712308><tr data-v-01712308><th data-v-01712308>参数</th><th data-v-01712308>说明</th><th data-v-01712308>类型</th><th data-v-01712308>可选值</th><th data-v-01712308>默认值</th></tr></thead><tbody data-v-01712308><tr data-v-01712308><td data-v-01712308>el</td><td data-v-01712308>容器元素，dom元素或选择器字符串</td><td data-v-01712308>Object/String</td><td data-v-01712308>—</td><td data-v-01712308></td></tr><tr data-v-01712308><td data-v-01712308>dbClickTime</td><td data-v-01712308>因为要检测双击，所以单击是有延时的，这个属性用来控制检测双击间隔的时间，即如果在该时间内鼠标点击了两次则认为是双击事件，单位ms</td><td data-v-01712308>Number</td><td data-v-01712308>—</td><td data-v-01712308>200</td></tr></tbody></table><h4 id="mark实例属性" data-v-01712308><a href="#mark实例属性" class="header-anchor" data-v-01712308>#</a> mark实例属性</h4><table data-v-01712308><thead data-v-01712308><tr data-v-01712308><th data-v-01712308>名称</th><th data-v-01712308>说明</th><th data-v-01712308>类型</th><th data-v-01712308>可选值</th><th data-v-01712308>默认值</th></tr></thead><tbody data-v-01712308><tr data-v-01712308><td data-v-01712308>opt</td><td data-v-01712308>配置参数对象</td><td data-v-01712308>Object</td><td data-v-01712308>—</td><td data-v-01712308></td></tr><tr data-v-01712308><td data-v-01712308>el</td><td data-v-01712308>容器元素</td><td data-v-01712308>Object/String</td><td data-v-01712308>—</td><td data-v-01712308></td></tr><tr data-v-01712308><td data-v-01712308>elRectInfo</td><td data-v-01712308>容器元素的尺寸信息</td><td data-v-01712308>Object</td><td data-v-01712308>—</td><td data-v-01712308></td></tr><tr data-v-01712308><td data-v-01712308>canvasEle</td><td data-v-01712308>绘图元素</td><td data-v-01712308>DOM Object</td><td data-v-01712308>—</td><td data-v-01712308></td></tr><tr data-v-01712308><td data-v-01712308>canvasEleRectInfo</td><td data-v-01712308>绘图元素的尺寸信息</td><td data-v-01712308>Object</td><td data-v-01712308>—</td><td data-v-01712308></td></tr><tr data-v-01712308><td data-v-01712308>ctx</td><td data-v-01712308>绘图上下文</td><td data-v-01712308>Object</td><td data-v-01712308>—</td><td data-v-01712308></td></tr><tr data-v-01712308><td data-v-01712308>observer</td><td data-v-01712308>发布订阅对象</td><td data-v-01712308>Object</td><td data-v-01712308>—</td><td data-v-01712308></td></tr></tbody></table><h4 id="mark实例事件" data-v-01712308><a href="#mark实例事件" class="header-anchor" data-v-01712308>#</a> mark实例事件</h4><table data-v-01712308><thead data-v-01712308><tr data-v-01712308><th data-v-01712308>事件</th><th data-v-01712308>说明</th><th data-v-01712308>回调函数参数</th></tr></thead><tbody data-v-01712308><tr data-v-01712308><td data-v-01712308>CLICK</td><td data-v-01712308>画布区域的鼠标单击事件</td><td data-v-01712308>e（事件对象）</td></tr><tr data-v-01712308><td data-v-01712308>DOUBLE-CLICK</td><td data-v-01712308>画布区域的鼠标双击事件</td><td data-v-01712308>e（事件对象）</td></tr><tr data-v-01712308><td data-v-01712308>MOUSEDOWN</td><td data-v-01712308>画布区域的鼠标按下事件</td><td data-v-01712308>e（事件对象）</td></tr><tr data-v-01712308><td data-v-01712308>MOUSEMOVE</td><td data-v-01712308>画布区域的鼠标移动事件</td><td data-v-01712308>e（事件对象）</td></tr><tr data-v-01712308><td data-v-01712308>MOUSEUP</td><td data-v-01712308>鼠标松开事件</td><td data-v-01712308>e（事件对象）</td></tr><tr data-v-01712308><td data-v-01712308>MOUSEENTER</td><td data-v-01712308>鼠标移入画布区域内事件</td><td data-v-01712308>e（事件对象）</td></tr><tr data-v-01712308><td data-v-01712308>MOUSELEAVE</td><td data-v-01712308>鼠标移出画布区域内事件</td><td data-v-01712308>e（事件对象）</td></tr><tr data-v-01712308><td data-v-01712308>WINDOW-CLICK</td><td data-v-01712308>window窗口的单击事件</td><td data-v-01712308>e（事件对象）</td></tr></tbody></table><h4 id="mark实例方法" data-v-01712308><a href="#mark实例方法" class="header-anchor" data-v-01712308>#</a> mark实例方法</h4><table data-v-01712308><thead data-v-01712308><tr data-v-01712308><th data-v-01712308>方法名</th><th data-v-01712308>说明</th><th data-v-01712308>参数</th></tr></thead><tbody data-v-01712308><tr data-v-01712308><td data-v-01712308>on</td><td data-v-01712308>监听事件，返回参数为一个token，用来解除事件监听</td><td data-v-01712308>event（事件名称）, callback（回调函数）</td></tr><tr data-v-01712308><td data-v-01712308>off</td><td data-v-01712308>解除监听事件</td><td data-v-01712308>token（监听事件时返回的token）</td></tr><tr data-v-01712308><td data-v-01712308>destroy</td><td data-v-01712308>销毁实例</td><td data-v-01712308></td></tr><tr data-v-01712308><td data-v-01712308>clearCanvas</td><td data-v-01712308>清除绘图画布</td><td data-v-01712308></td></tr><tr data-v-01712308><td data-v-01712308>toCanvasPos</td><td data-v-01712308>鼠标坐标转为相对绘图画布的坐标</td><td data-v-01712308>e（事件对象或{clientX, clientY}）</td></tr></tbody></table><h3 id="_3-编辑插件edit" data-v-01712308><a href="#_3-编辑插件edit" class="header-anchor" data-v-01712308>#</a> 3.编辑插件edit</h3><p data-v-01712308>编辑插件为核心插件，自动进行注册。该插件的入参也是通过实例化<code data-v-01712308>Markjs</code>时进行传入。</p><h4 id="入参" data-v-01712308><a href="#入参" class="header-anchor" data-v-01712308>#</a> 入参</h4><table data-v-01712308><thead data-v-01712308><tr data-v-01712308><th data-v-01712308>参数</th><th data-v-01712308>说明</th><th data-v-01712308>类型</th><th data-v-01712308>可选值</th><th data-v-01712308>默认值</th></tr></thead><tbody data-v-01712308><tr data-v-01712308><td data-v-01712308>value</td><td data-v-01712308>回显的标注区域数据，对象数组，对象的字段见表3-1</td><td data-v-01712308>Array</td><td data-v-01712308>—</td><td data-v-01712308>[]</td></tr><tr data-v-01712308><td data-v-01712308>strokeStyle</td><td data-v-01712308>标注区域轮廓样式，对象格式，字段见表3-2</td><td data-v-01712308>Object</td><td data-v-01712308>—</td><td data-v-01712308></td></tr><tr data-v-01712308><td data-v-01712308>pointStyle</td><td data-v-01712308>标注区域顶点样式，对象格式，字段见表3-3</td><td data-v-01712308>Object</td><td data-v-01712308>—</td><td data-v-01712308></td></tr><tr data-v-01712308><td data-v-01712308>fillColor</td><td data-v-01712308>标注区域填充颜色</td><td data-v-01712308>String</td><td data-v-01712308>—</td><td data-v-01712308>rgba(0, 136, 255, 0.5)</td></tr><tr data-v-01712308><td data-v-01712308>showPoint</td><td data-v-01712308>是否绘制端点</td><td data-v-01712308>Boolean</td><td data-v-01712308>—</td><td data-v-01712308>true</td></tr><tr data-v-01712308><td data-v-01712308>pointType</td><td data-v-01712308>顶点形状</td><td data-v-01712308>String</td><td data-v-01712308>square（正方形）、circle（圆形）</td><td data-v-01712308>square</td></tr><tr data-v-01712308><td data-v-01712308>pointWidth</td><td data-v-01712308>顶点的宽度，正方形为边长的一半、圆形为半径</td><td data-v-01712308>Number</td><td data-v-01712308>—</td><td data-v-01712308>3</td></tr><tr data-v-01712308><td data-v-01712308>customRenderPoint</td><td data-v-01712308>自定义绘制顶点的方法，入参（ctx, x, y, onlyPath, pointStyle），分别为：ctx（canvas绘图上下文）、x,y（中心点的位置）、onlyPath（为true代表用于检测点是否在该顶点路径内时调用，此时不应该实际绘制出来，只要绘制路径即可）、pointStyle（顶点样式）</td><td data-v-01712308></td><td data-v-01712308>—</td><td data-v-01712308></td></tr><tr data-v-01712308><td data-v-01712308>max</td><td data-v-01712308>允许创建的标注区域数量限制，默认-1，不限制</td><td data-v-01712308>Number</td><td data-v-01712308>—</td><td data-v-01712308>-1</td></tr><tr data-v-01712308><td data-v-01712308>hoverActive</td><td data-v-01712308>鼠标滑过对象时显示可激活状态</td><td data-v-01712308>Boolean</td><td data-v-01712308>—</td><td data-v-01712308>false</td></tr><tr data-v-01712308><td data-v-01712308>readonly</td><td data-v-01712308>是否只读，不允许编辑，可调用方法开启编辑状态</td><td data-v-01712308>Boolean</td><td data-v-01712308>—</td><td data-v-01712308>false</td></tr><tr data-v-01712308><td data-v-01712308>single</td><td data-v-01712308>是否激活编辑某个区域时隐藏其他所有区域</td><td data-v-01712308>Boolean</td><td data-v-01712308>—</td><td data-v-01712308>false</td></tr><tr data-v-01712308><td data-v-01712308>noCrossing</td><td data-v-01712308>是否禁止线段交叉</td><td data-v-01712308>Boolean</td><td data-v-01712308>—</td><td data-v-01712308>false</td></tr></tbody></table><h4 id="表3-1-标注区域对象格式" data-v-01712308><a href="#表3-1-标注区域对象格式" class="header-anchor" data-v-01712308>#</a> 表3-1 标注区域对象格式</h4><table data-v-01712308><thead data-v-01712308><tr data-v-01712308><th data-v-01712308>字段名</th><th data-v-01712308>说明</th><th data-v-01712308>类型</th><th data-v-01712308>可选值</th><th data-v-01712308>默认值</th></tr></thead><tbody data-v-01712308><tr data-v-01712308><td data-v-01712308>data</td><td data-v-01712308>附加数据，你需要存储的任何数据</td><td data-v-01712308>Any</td><td data-v-01712308>—</td><td data-v-01712308>null</td></tr><tr data-v-01712308><td data-v-01712308>pointArr</td><td data-v-01712308>区域顶点坐标数据，对象数组，对象格式为：{x,y}，为比例坐标，即x为相对于绘图区域宽的比例，y为相对于绘图区域高的比例</td><td data-v-01712308>Array</td><td data-v-01712308>—</td><td data-v-01712308>[]</td></tr><tr data-v-01712308><td data-v-01712308>strokeStyle</td><td data-v-01712308>标注区域轮廓样式，对象格式，字段见表3-2</td><td data-v-01712308>Object</td><td data-v-01712308>—</td><td data-v-01712308></td></tr><tr data-v-01712308><td data-v-01712308>pointStyle</td><td data-v-01712308>标注区域顶点样式，对象格式，字段见表3-3</td><td data-v-01712308>Object</td><td data-v-01712308>—</td><td data-v-01712308></td></tr><tr data-v-01712308><td data-v-01712308>fillColor</td><td data-v-01712308>标注区域填充颜色</td><td data-v-01712308>String</td><td data-v-01712308>—</td><td data-v-01712308>rgba(0, 136, 255, 0.5)</td></tr></tbody></table><h4 id="表3-2-strokestyle样式对象格式" data-v-01712308><a href="#表3-2-strokestyle样式对象格式" class="header-anchor" data-v-01712308>#</a> 表3-2 strokeStyle样式对象格式</h4><table data-v-01712308><thead data-v-01712308><tr data-v-01712308><th data-v-01712308>字段名</th><th data-v-01712308>说明</th><th data-v-01712308>类型</th><th data-v-01712308>可选值</th><th data-v-01712308>默认值</th></tr></thead><tbody data-v-01712308><tr data-v-01712308><td data-v-01712308>lineWidth</td><td data-v-01712308>线条宽度</td><td data-v-01712308>Number</td><td data-v-01712308>—</td><td data-v-01712308>3</td></tr><tr data-v-01712308><td data-v-01712308>strokeColor</td><td data-v-01712308>线条颜色</td><td data-v-01712308>String</td><td data-v-01712308>—</td><td data-v-01712308>rgba(0, 136, 255, 1)</td></tr><tr data-v-01712308><td data-v-01712308>lineJoin</td><td data-v-01712308>线条末端样式</td><td data-v-01712308>String</td><td data-v-01712308>bevel（斜角）、round（圆角）、miter（尖角）</td><td data-v-01712308>round</td></tr></tbody></table><h4 id="表3-3-pointstyle样式对象格式" data-v-01712308><a href="#表3-3-pointstyle样式对象格式" class="header-anchor" data-v-01712308>#</a> 表3-3 pointStyle样式对象格式</h4><table data-v-01712308><thead data-v-01712308><tr data-v-01712308><th data-v-01712308>字段名</th><th data-v-01712308>说明</th><th data-v-01712308>类型</th><th data-v-01712308>可选值</th><th data-v-01712308>默认值</th></tr></thead><tbody data-v-01712308><tr data-v-01712308><td data-v-01712308>lineWidth</td><td data-v-01712308>线条宽度</td><td data-v-01712308>Number</td><td data-v-01712308>—</td><td data-v-01712308>3</td></tr><tr data-v-01712308><td data-v-01712308>strokeColor</td><td data-v-01712308>线条颜色</td><td data-v-01712308>String</td><td data-v-01712308>—</td><td data-v-01712308>rgba(0, 136, 255, 1)</td></tr><tr data-v-01712308><td data-v-01712308>fillColor</td><td data-v-01712308>填充颜色</td><td data-v-01712308>String</td><td data-v-01712308>—</td><td data-v-01712308>rgba(0, 136, 255, 0.5)</td></tr></tbody></table><h4 id="实例事件" data-v-01712308><a href="#实例事件" class="header-anchor" data-v-01712308>#</a> 实例事件</h4><table data-v-01712308><thead data-v-01712308><tr data-v-01712308><th data-v-01712308>事件</th><th data-v-01712308>说明</th><th data-v-01712308>回调函数参数</th></tr></thead><tbody data-v-01712308><tr data-v-01712308><td data-v-01712308>CURRENT-MARK-ITEM-CHANGE</td><td data-v-01712308>当前激活标注对象变化时触发</td><td data-v-01712308>item（当前激活的标注对象）</td></tr><tr data-v-01712308><td data-v-01712308>HOVER-ITEM</td><td data-v-01712308>鼠标移到某个标注对象区域内时触发</td><td data-v-01712308>inPathItem（当前移入的标注对象）, curEditingMarkItem（当前激活的标注对象）, e（事件对象）</td></tr><tr data-v-01712308><td data-v-01712308>COMPLETE-EDIT-ITEM</td><td data-v-01712308>双击完成绘制时触发</td><td data-v-01712308>curEditingMarkItem（当前激活的标注对象）, e（事件对象）</td></tr><tr data-v-01712308><td data-v-01712308>IS-CREATE-MARKING-CHANGE</td><td data-v-01712308>当前是否在创建标注中的状态变化时触发，只在标注仍未闭合时的创建中触发，不包括闭合后的编辑</td><td data-v-01712308>state（状态）</td></tr><tr data-v-01712308><td data-v-01712308>LINE-CROSS</td><td data-v-01712308>检测到线段交叉时触发</td><td data-v-01712308>curEditingMarkItem（当前激活的标注对象）</td></tr><tr data-v-01712308><td data-v-01712308>NOT-ENOUGH-END-POINTS</td><td data-v-01712308>双击闭合路径时如果顶点数量不足3个时触发</td><td data-v-01712308>curEditingMarkItem（当前激活的标注对象）</td></tr><tr data-v-01712308><td data-v-01712308>COUNT-LIMIT</td><td data-v-01712308>创建新标注时如果数量超出限制时触发</td><td data-v-01712308>curEditingMarkItem（当前激活的标注对象）</td></tr></tbody></table><h4 id="实例方法" data-v-01712308><a href="#实例方法" class="header-anchor" data-v-01712308>#</a> 实例方法</h4><table data-v-01712308><thead data-v-01712308><tr data-v-01712308><th data-v-01712308>方法名</th><th data-v-01712308>说明</th><th data-v-01712308>参数</th></tr></thead><tbody data-v-01712308><tr data-v-01712308><td data-v-01712308>getState</td><td data-v-01712308>获取当前一些状态的值，返回一个对象，见表3-5</td><td data-v-01712308></td></tr><tr data-v-01712308><td data-v-01712308>getMarkData</td><td data-v-01712308>获取标注点位数据，返回一个对象，有两个字段，data（创建对象时你添加的附加数据）、pointArr（标注区域顶点坐标数组，为比例数据）</td><td data-v-01712308></td></tr><tr data-v-01712308><td data-v-01712308>enableEdit</td><td data-v-01712308>开启编辑模式</td><td data-v-01712308></td></tr><tr data-v-01712308><td data-v-01712308>disableEdit</td><td data-v-01712308>开启只读模式，成功返回true，返回false代表当前有正在编辑中的对象，不能结束编辑</td><td data-v-01712308></td></tr><tr data-v-01712308><td data-v-01712308>deleteMarkItem</td><td data-v-01712308>删除指定标注对象，删除成功返回true</td><td data-v-01712308>item（要删除的标注对象）</td></tr><tr data-v-01712308><td data-v-01712308>deleteAllMarkItem</td><td data-v-01712308>删除所有标注对象</td><td data-v-01712308></td></tr><tr data-v-01712308><td data-v-01712308>reset</td><td data-v-01712308>清除所有标注区域的鼠标滑入状态、激活状态，清除当前的激活元素</td><td data-v-01712308></td></tr><tr data-v-01712308><td data-v-01712308>createMarkItem</td><td data-v-01712308>创建新标注区域，即使当前状态为可编辑状态，也需要调用该方法后才能在画布上创建新区域，每次创建一个新标注区域时都需要调用一次该方法，成功返回true，返回false代表不能创建新标注</td><td data-v-01712308>opt（对象格式，包括表3-1的所有字段）</td></tr><tr data-v-01712308><td data-v-01712308>exitCreate</td><td data-v-01712308>取消/退出创建，<code data-v-01712308>createMarkItem</code>后可通过调用该方法来结束创建，<code data-v-01712308>single</code>为true的情况下激活了某个区域后想要退出激活时可以调用<code data-v-01712308>reset</code>方法</td><td data-v-01712308></td></tr></tbody></table><h4 id="表3-5-getstate返回的状态对象格式" data-v-01712308><a href="#表3-5-getstate返回的状态对象格式" class="header-anchor" data-v-01712308>#</a> 表3-5 getState返回的状态对象格式</h4><table data-v-01712308><thead data-v-01712308><tr data-v-01712308><th data-v-01712308>字段名</th><th data-v-01712308>说明</th></tr></thead><tbody data-v-01712308><tr data-v-01712308><td data-v-01712308>markItemList</td><td data-v-01712308>当前存在的标注对象列表</td></tr><tr data-v-01712308><td data-v-01712308>curEditingMarkItem</td><td data-v-01712308>当前激活的标注对象</td></tr><tr data-v-01712308><td data-v-01712308>isReadonly</td><td data-v-01712308>是否是只读状态</td></tr><tr data-v-01712308><td data-v-01712308>isCreateMarking</td><td data-v-01712308>是否正在创建新标注中，不包括闭合后的编辑</td></tr></tbody></table><h3 id="_4-图片支持插件img" data-v-01712308><a href="#_4-图片支持插件img" class="header-anchor" data-v-01712308>#</a> 4.图片支持插件img</h3><p data-v-01712308>当你需要标注图片时可以引入该插件，该插件会根据图片的实际宽高来进行等比例缩放绘图区域，并显示图片，如果最终绘图区域和容器宽高不一致会自动居中。</p><p data-v-01712308>图片支持插件需要手动引入注册，且要在编辑插件edit之前注册。</p><div class="language-js extra-class" data-v-01712308><pre class="language-js" data-v-01712308><code data-v-01712308><span class="token keyword" data-v-01712308>import</span> Markjs <span class="token keyword" data-v-01712308>from</span> <span class="token string" data-v-01712308>'markjs'</span>
<span class="token keyword" data-v-01712308>import</span> imgPlugin <span class="token keyword" data-v-01712308>from</span> <span class="token string" data-v-01712308>'markjs/src/plugins/img'</span>
Markjs<span class="token punctuation" data-v-01712308>.</span><span class="token function" data-v-01712308>use</span><span class="token punctuation" data-v-01712308>(</span>imgPlugin<span class="token punctuation" data-v-01712308>,</span> <span class="token number" data-v-01712308>0</span><span class="token punctuation" data-v-01712308>)</span>
</code></pre></div><h4 id="入参-2" data-v-01712308><a href="#入参-2" class="header-anchor" data-v-01712308>#</a> 入参</h4><table data-v-01712308><thead data-v-01712308><tr data-v-01712308><th data-v-01712308>参数</th><th data-v-01712308>说明</th><th data-v-01712308>类型</th><th data-v-01712308>可选值</th><th data-v-01712308>默认值</th></tr></thead><tbody data-v-01712308><tr data-v-01712308><td data-v-01712308>img</td><td data-v-01712308>图片地址，必填</td><td data-v-01712308>String</td><td data-v-01712308>—</td><td data-v-01712308></td></tr><tr data-v-01712308><td data-v-01712308>elBg</td><td data-v-01712308>容器的背景颜色</td><td data-v-01712308>String</td><td data-v-01712308>—</td><td data-v-01712308></td></tr><tr data-v-01712308><td data-v-01712308>bg</td><td data-v-01712308>画布的背景颜色</td><td data-v-01712308>String</td><td data-v-01712308>—</td><td data-v-01712308></td></tr></tbody></table><h4 id="实例事件-2" data-v-01712308><a href="#实例事件-2" class="header-anchor" data-v-01712308>#</a> 实例事件</h4><table data-v-01712308><thead data-v-01712308><tr data-v-01712308><th data-v-01712308>事件名</th><th data-v-01712308>说明</th><th data-v-01712308>回调函数参数</th></tr></thead><tbody data-v-01712308><tr data-v-01712308><td data-v-01712308>imgLoadError</td><td data-v-01712308>图片加载失败时触发</td><td data-v-01712308>e（错误对象）</td></tr></tbody></table><h4 id="实例属性" data-v-01712308><a href="#实例属性" class="header-anchor" data-v-01712308>#</a> 实例属性</h4><table data-v-01712308><thead data-v-01712308><tr data-v-01712308><th data-v-01712308>属性名</th><th data-v-01712308>说明</th></tr></thead><tbody data-v-01712308><tr data-v-01712308><td data-v-01712308>image</td><td data-v-01712308>图片对象</td></tr><tr data-v-01712308><td data-v-01712308>ratio</td><td data-v-01712308>图片实际的宽高与容器宽高的比例</td></tr></tbody></table><h3 id="_5-鼠标样式支持插件mouse" data-v-01712308><a href="#_5-鼠标样式支持插件mouse" class="header-anchor" data-v-01712308>#</a> 5.鼠标样式支持插件mouse</h3><p data-v-01712308>当需要鼠标在特定状态显示特定的样式时可以使用该插件，该插件需要手动引入注册。</p><div class="language-js extra-class" data-v-01712308><pre class="language-js" data-v-01712308><code data-v-01712308><span class="token keyword" data-v-01712308>import</span> Markjs <span class="token keyword" data-v-01712308>from</span> <span class="token string" data-v-01712308>'markjs'</span>
<span class="token keyword" data-v-01712308>import</span> mousePlugin <span class="token keyword" data-v-01712308>from</span> <span class="token string" data-v-01712308>'markjs/src/plugins/mouse'</span>
Markjs<span class="token punctuation" data-v-01712308>.</span><span class="token function" data-v-01712308>use</span><span class="token punctuation" data-v-01712308>(</span>mousePlugin<span class="token punctuation" data-v-01712308>)</span>
</code></pre></div><h4 id="入参-3" data-v-01712308><a href="#入参-3" class="header-anchor" data-v-01712308>#</a> 入参</h4><table data-v-01712308><thead data-v-01712308><tr data-v-01712308><th data-v-01712308>参数</th><th data-v-01712308>说明</th><th data-v-01712308>类型</th><th data-v-01712308>可选值</th><th data-v-01712308>默认值</th></tr></thead><tbody data-v-01712308><tr data-v-01712308><td data-v-01712308>cursorTips</td><td data-v-01712308>提示信息，对象，格式见表5-1</td><td data-v-01712308>Object</td><td data-v-01712308>—</td><td data-v-01712308></td></tr><tr data-v-01712308><td data-v-01712308>showPen</td><td data-v-01712308>否显示鼠标指针画笔</td><td data-v-01712308>Boolean</td><td data-v-01712308>—</td><td data-v-01712308>true</td></tr><tr data-v-01712308><td data-v-01712308>penImg</td><td data-v-01712308>自定义鼠标指针图片地址</td><td data-v-01712308>String</td><td data-v-01712308>—</td><td data-v-01712308></td></tr></tbody></table><h4 id="表5-1-getstate返回的状态对象格式" data-v-01712308><a href="#表5-1-getstate返回的状态对象格式" class="header-anchor" data-v-01712308>#</a> 表5-1 getState返回的状态对象格式</h4><table data-v-01712308><thead data-v-01712308><tr data-v-01712308><th data-v-01712308>字段名</th><th data-v-01712308>说明</th><th data-v-01712308>默认值</th></tr></thead><tbody data-v-01712308><tr data-v-01712308><td data-v-01712308>START</td><td data-v-01712308>正在创建一个新标注对象时未闭合时鼠标显示的文字</td><td data-v-01712308>单击进行绘制，双击结束操作</td></tr><tr data-v-01712308><td data-v-01712308>EDITING</td><td data-v-01712308>移入当前激活对象区域内时鼠标显示的文字</td><td data-v-01712308>拖曳移动节点或区域，双击结束操作</td></tr><tr data-v-01712308><td data-v-01712308>HOVER</td><td data-v-01712308>当前没有激活对象时移入某个标注对象时鼠标显示的文字</td><td data-v-01712308>单击激活该区域并进入编辑状态</td></tr></tbody></table><h3 id="_6-特定形状插件shape" data-v-01712308><a href="#_6-特定形状插件shape" class="header-anchor" data-v-01712308>#</a> 6.特定形状插件shape</h3><p data-v-01712308>当你需要创建一个特定形状的标注对象时可以使用该插件，该插件需要手动引入注册。</p><p data-v-01712308>因为本人水平所限，只内置了正方形一种图形，你可以基于<code data-v-01712308>shape</code>配置参数来创建你需要的特定图形。</p><div class="language-js extra-class" data-v-01712308><pre class="language-js" data-v-01712308><code data-v-01712308><span class="token keyword" data-v-01712308>import</span> Markjs <span class="token keyword" data-v-01712308>from</span> <span class="token string" data-v-01712308>'markjs'</span>
<span class="token keyword" data-v-01712308>import</span> shapePlugin <span class="token keyword" data-v-01712308>from</span> <span class="token string" data-v-01712308>'markjs/src/plugins/shape'</span>
Markjs<span class="token punctuation" data-v-01712308>.</span><span class="token function" data-v-01712308>use</span><span class="token punctuation" data-v-01712308>(</span>shapePlugin<span class="token punctuation" data-v-01712308>)</span>
</code></pre></div><h4 id="入参-4" data-v-01712308><a href="#入参-4" class="header-anchor" data-v-01712308>#</a> 入参</h4><table data-v-01712308><thead data-v-01712308><tr data-v-01712308><th data-v-01712308>参数</th><th data-v-01712308>说明</th><th data-v-01712308>类型</th><th data-v-01712308>可选值</th><th data-v-01712308>默认值</th></tr></thead><tbody data-v-01712308><tr data-v-01712308><td data-v-01712308>shape</td><td data-v-01712308>形状扩展配置，可以通过该对象来扩展你自己需要的特定形状，目前只内置了正方形一种，对象格式，每个字段为一个特定形状，如：{square: shapeConfig, triangle: shapeConfig }，字段名为形状的名称，形状的配置对象shapeConfig字段见表6-1</td><td data-v-01712308>Object</td><td data-v-01712308>—</td><td data-v-01712308></td></tr></tbody></table><h4 id="表6-1-shapeconfig形状对象字段格式" data-v-01712308><a href="#表6-1-shapeconfig形状对象字段格式" class="header-anchor" data-v-01712308>#</a> 表6-1 shapeConfig形状对象字段格式</h4><table data-v-01712308><thead data-v-01712308><tr data-v-01712308><th data-v-01712308>方法名</th><th data-v-01712308>说明</th><th data-v-01712308>参数</th></tr></thead><tbody data-v-01712308><tr data-v-01712308><td data-v-01712308>create</td><td data-v-01712308>当调用<code data-v-01712308>createShapeMarkItem</code>方法创建新的特定对象时会调用该方法来初始显示一个指定形状，需要返回一个<code data-v-01712308>pointArr</code>数组，字段可见表3-1里的<code data-v-01712308>pointArr</code>，所以简单来说，你需要返回一个形状的初始坐标数组</td><td data-v-01712308>canvasEleRectInfo（画布区域的尺寸信息）</td></tr><tr data-v-01712308><td data-v-01712308>update</td><td data-v-01712308>当鼠标拖动某个端点时会调用该方法，你需要在该方法内更新当前标注对象的<code data-v-01712308>pointArr</code>坐标数据来更新维护当前特定形状</td><td data-v-01712308>instance（当前标注对象）, x（当前鼠标指针相对于画布的x坐标）, y（当前鼠标指针相对于画布的y坐标）</td></tr></tbody></table><h3 id="_7-插件开发" data-v-01712308><a href="#_7-插件开发" class="header-anchor" data-v-01712308>#</a> 7.插件开发</h3><p data-v-01712308>如果以上仍然不能满足你的要求的话那么你可以考虑开发自己的插件，如果是的话你可能首先看一下源码，特别是内置的插件源码，可以参考来进行开发，幸运的是源码并不复杂，甚至还有点简单。</p><p data-v-01712308>一个插件就是一个函数，插件会在实例创建的最后进行循环调用，值得注意的是通过<code data-v-01712308>promise</code>来进行链式调用的，这么设计的原因是因为某个插件的注册过程可能是异步的，但是后面的插件又必须等待它注册完毕，所以插件函数需要返回一个<code data-v-01712308>promise</code>，且只能被<code data-v-01712308>resolve</code>，不能被<code data-v-01712308>reject</code>。</p><p data-v-01712308>插件的注册其实就是调用该插件函数，入参有两个：<code data-v-01712308>this</code>（当前实例）, <code data-v-01712308>utils</code>（工具函数对象），你可以基于当前实例的一系列属性、方法来进行功能开发。</p><p data-v-01712308>当你的某个属性或者方法需要暴露给实例对象来提供访问时，可以把它以属性的方式添加给<code data-v-01712308>this</code>。</p><p data-v-01712308>如果某个属性或者方法通过<code data-v-01712308>this</code>访问不到而你又需要，可以提交<code data-v-01712308>issue</code>，我会及时添加。</p><p data-v-01712308>插件开发完毕，你可以将它发布到<code data-v-01712308>npm</code>，供其他人使用。</p></div><footer class="page-edit"><!----><!----></footer><div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/vue_components/zh/library/measure/" class="prev">
        OpenLayers 测距离面积
      </a></span><span class="next"><a href="/vue_components/zh/fragment/openlayers/">
        OpenLayers 相关
      </a>
      →
    </span></p></div></main></div><div class="global-ui"><!----></div></div>
    <script src="/vue_components/assets/js/app.2a8a8f25.js" defer></script><script src="/vue_components/assets/js/3.2c2d63e0.js" defer></script><script src="/vue_components/assets/js/9.b8fbaa3e.js" defer></script><script src="/vue_components/assets/js/33.2476d2ad.js" defer></script>
  </body>
</html>
